import{d as ae,u as oe,a3 as ne,H as I,o as se,c as r,e,g as d,h as re,s as G,f as $,p as m,v as x,q as f,t as i,F as q,B as Q,I as ie,w as de,R as ue,r as h,i as U,L as z,M as _e,x as ce,j as s,a4 as ve,N as _,_ as pe}from"./index-B7jQKMlp.js";const me={class:"content-area flex flex-col flex-1 min-h-0 w-full max-w-[1600px] mx-auto px-4 py-5 md:px-6 md:py-6"},xe={class:"flex flex-wrap items-center justify-between gap-4 mb-6"},he={class:"flex flex-wrap items-center gap-3"},be={key:0,class:"tax-search-bar"},fe={class:"tax-search-bar__row"},ge={key:0,class:"tax-search-bar__hint"},ye={class:"tax-table-wrap"},ke={key:0,class:"tax-table-skeleton"},Ve={class:"tax-table-skeleton__search"},we={class:"tax-table"},De={class:"tax-table__actions-th"},Ee={class:"tax-table__actions-td"},Ce={key:1,class:"tax-table-error"},Te={key:2,class:"tax-table-empty"},Ne={key:3,class:"tax-table-empty"},Re={key:4},Le={class:"tax-table-scroll"},Me={class:"tax-table"},He={key:0,class:"tax-table__status-icon",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24","aria-hidden":"true"},We={key:1,class:"tax-table__status-icon",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24","aria-hidden":"true"},Se={class:"tax-table__status-badge"},Ie={key:0,class:"tax-table__status-icon",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24","aria-hidden":"true"},Be={key:1,class:"tax-table__status-icon",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24","aria-hidden":"true"},Ae={class:"tax-table__status-badge"},je={class:"tax-table__actions-td"},Ge=["onClick"],$e={key:0,class:"pagination"},Ue=["disabled"],ze={class:"pagination__label"},Fe=["disabled"],Oe={key:0,class:"tax-modal-backdrop"},Pe=["aria-labelledby"],qe={class:"tax-modal__header"},Qe=["id"],Ye={key:0,class:"tax-modal__error",role:"alert"},Ze={class:"tax-modal__error-text"},Je={class:"tax-modal__section"},Ke={class:"tax-modal__label"},Xe={class:"tax-modal__label"},et={class:"tax-modal__label"},tt={class:"tax-modal__label"},lt={class:"tax-modal__label"},at={class:"tax-modal__section"},ot={class:"tax-modal__row"},nt={class:"tax-modal__label"},st={class:"tax-modal__label"},rt={class:"tax-modal__row"},it={class:"tax-modal__label"},dt={class:"tax-modal__label"},ut={class:"tax-modal__actions"},_t=["disabled"],F=10,ct=ae({__name:"VendorsView",setup(vt){const{createRecord:Y,updateRecord:Z,findRecordsWithIds:J,isConnected:B}=ce(),y=oe(),O=ne(),k=h([]),D=h(!0),E=h(null),V=h(!1),c=h(""),p=h(null),o=h({Vendor_ID:"",Vendor_Name:"",Vendor_Location:"",Vendor_Email:"",GRA_Expiry_Date:"",Received_Date:"",Tin_Number:"",WHT_Expiry_Date:"",Received_WHT_Date:""}),b=h(null),C=h(!1);function u(a,t){const n=a.fieldData,l=n[t]??n[t.replace(/_/g," ")];return l==null||l===""?"—":String(l).trim()}function w(a){if(!a||a==="—")return"tax-table__status--other";const t=a.toLowerCase().trim();return t==="valid"||t==="ok"||t==="yes"||t==="good"?"tax-table__status--valid":t==="expired"||t==="no"||t==="invalid"?"tax-table__status--expired":"tax-table__status--other"}const T=U(()=>{const a=c.value.toLowerCase();return a?k.value.filter(t=>{const n=t.fieldData,l=String(n.Vendor_ID??n["Vendor ID"]??"").toLowerCase(),g=String(n.Vendor_Name??n["Vendor Name"]??"").toLowerCase(),R=String(n.Vendor_Location??n["Vendor Location"]??"").toLowerCase(),W=String(n.Vendor_Email??n["Vendor Email"]??"").toLowerCase(),S=String(n.Tin_Number??n["Tin Number"]??"").toLowerCase();return l.includes(a)||g.includes(a)||R.includes(a)||W.includes(a)||S.includes(a)}):k.value}),v=h(1),N=U(()=>Math.max(1,Math.ceil(T.value.length/F))),K=U(()=>{const a=(v.value-1)*F;return T.value.slice(a,a+F)});I(c,()=>{v.value=1}),I(N,a=>{v.value>a&&(v.value=Math.max(1,a))});function P(a){return a!=null&&a.trim()?a.trim():"—"}function M(a){if(!(a!=null&&a.trim()))return"";const t=a.trim(),n=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/.exec(t);if(n){const l=n[1].padStart(2,"0"),g=n[2].padStart(2,"0");return`${n[3]}-${l}-${g}`}return/^\d{4}-\d{2}-\d{2}$/.test(t)?t:""}function H(a){return ve(a)}function A(){V.value=!1,p.value=null}function X(){p.value=null,o.value={Vendor_ID:"",Vendor_Name:"",Vendor_Location:"",Vendor_Email:"",GRA_Expiry_Date:"",Received_Date:"",Tin_Number:"",WHT_Expiry_Date:"",Received_WHT_Date:""},b.value=null}function ee(a){const t=a.fieldData;o.value={Vendor_ID:String(t.Vendor_ID??t["Vendor ID"]??""),Vendor_Name:String(t.Vendor_Name??t["Vendor Name"]??""),Vendor_Location:String(t.Vendor_Location??t["Vendor Location"]??""),Vendor_Email:String(t.Vendor_Email??t["Vendor Email"]??""),GRA_Expiry_Date:M(t.GRA_Expiry_Date??t["GRA Expiry Date"]),Received_Date:M(t.Received_Date??t["Received Date"]),Tin_Number:String(t.Tin_Number??t["Tin Number"]??""),WHT_Expiry_Date:M(t.WHT_Expiry_Date??t["WHT Expiry Date"]),Received_WHT_Date:M(t.Received_WHT_Date??t["Received WHT Date"])},p.value=a.recordId,b.value=null,V.value=!0}I(V,a=>{a||(p.value=null)});function te(){var a;return(a=o.value.Vendor_Name)!=null&&a.trim()?null:"Vendor Name is required."}async function le(){var n,l,g,R,W;if(C.value)return;if(!B.value){y.error("Not connected to FileMaker."),b.value=null;return}const a=te();if(a){y.error(a),b.value=null;return}C.value=!0,b.value=null;const t=p.value?String(p.value).trim():null;try{const S={Vendor_ID:((n=o.value.Vendor_ID)==null?void 0:n.trim())||void 0,Vendor_Name:(l=o.value.Vendor_Name)==null?void 0:l.trim(),Vendor_Location:((g=o.value.Vendor_Location)==null?void 0:g.trim())||void 0,Vendor_Email:((R=o.value.Vendor_Email)==null?void 0:R.trim())||void 0,GRA_Expiry_Date:H(o.value.GRA_Expiry_Date),Received_Date:H(o.value.Received_Date),Tin_Number:((W=o.value.Tin_Number)==null?void 0:W.trim())||void 0,WHT_Expiry_Date:H(o.value.WHT_Expiry_Date),Received_WHT_Date:H(o.value.Received_WHT_Date)};if(t){const{error:L}=await Z(z.VENDOR_TBL,t,S);if(L){y.error(L),b.value=null;return}y.success("Vendor updated successfully.")}else{const{error:L}=await Y(z.VENDOR_TBL,S);if(L){y.error(L),b.value=null;return}y.success("Vendor added successfully.")}A(),X(),await j()}finally{C.value=!1}}async function j(){if(!B.value){k.value=[],D.value=!1;return}D.value=!0,E.value=null;const{data:a,error:t}=await J(z.VENDOR_TBL,{limit:500});D.value=!1,t?(y.error(t),E.value=null,k.value=[],O.setVendorCount(0)):(k.value=a,O.setVendorCount(a.length))}return se(j),I(B,a=>{a&&j()}),(a,t)=>{const n=_e("router-link");return s(),r("div",me,[e("header",xe,[e("div",he,[d(n,{to:"/",class:"pill-btn glass-input inline-flex items-center gap-1.5 px-3 py-2 text-[var(--label-size)] text-[var(--color-text-muted)] no-underline hover:text-[var(--color-text)]"},{default:re(()=>[...t[16]||(t[16]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),G(" Back ",-1)])]),_:1}),t[17]||(t[17]=e("h1",{class:"text-xl font-bold tracking-tight text-[var(--color-text)]"}," Vendors ",-1))]),e("button",{type:"button",class:"pill-btn inline-flex items-center gap-2 rounded-full bg-orange-500 px-4 py-2.5 text-[var(--label-size)] font-semibold text-white shadow-md hover:bg-orange-600 transition-colors",onClick:t[0]||(t[0]=l=>V.value=!0)},[...t[18]||(t[18]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),G(" Add Vendor ",-1)])])]),t[43]||(t[43]=e("p",{class:"text-[var(--label-size)] text-[var(--color-text-muted)] mb-4"}," Manage vendors here. View, add, and edit vendor details. ",-1)),!D.value&&!E.value&&k.value.length>0?(s(),r("div",be,[e("div",fe,[e("div",{class:$(["search-bar__wrap tax-search-bar__search",{"search-bar__wrap--has-value":c.value}])},[t[20]||(t[20]=e("span",{class:"search-bar__icon","aria-hidden":"true"},[e("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[e("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>c.value=l),type:"search",class:"search-bar__input",placeholder:"Search vendors…",autocomplete:"off","aria-label":"Search vendors"},null,512),[[x,c.value,void 0,{trim:!0}]]),c.value?(s(),r("button",{key:0,type:"button",class:"search-bar__clear","aria-label":"Clear search",onClick:t[2]||(t[2]=l=>c.value="")},[...t[19]||(t[19]=[e("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])):f("",!0)],2)]),c.value?(s(),r("p",ge,i(T.value.length)+" result"+i(T.value.length===1?"":"s"),1)):f("",!0)])):f("",!0),e("div",ye,[D.value?(s(),r("div",ke,[e("div",Ve,[d(_,{width:"100%",height:"2.75rem",class:"rounded-xl"})]),e("table",we,[e("thead",null,[e("tr",null,[e("th",null,[d(_,{width:"5rem",height:"0.875rem",class:"rounded"})]),e("th",null,[d(_,{width:"6rem",height:"0.875rem",class:"rounded"})]),e("th",null,[d(_,{width:"4rem",height:"0.875rem",class:"rounded"})]),e("th",null,[d(_,{width:"4.5rem",height:"0.875rem",class:"rounded"})]),e("th",null,[d(_,{width:"4rem",height:"0.875rem",class:"rounded"})]),e("th",null,[d(_,{width:"4rem",height:"0.875rem",class:"rounded"})]),e("th",De,[d(_,{width:"2.5rem",height:"0.875rem",class:"rounded"})])])]),e("tbody",null,[(s(),r(q,null,Q(6,l=>e("tr",{key:l,class:"tax-table-skeleton__row"},[e("td",null,[d(_,{width:"4rem",height:"0.875rem",class:"rounded"})]),e("td",null,[d(_,{width:"70%",height:"0.875rem",class:"rounded max-w-[8rem]"})]),e("td",null,[d(_,{width:"5rem",height:"0.875rem",class:"rounded"})]),e("td",null,[d(_,{width:"4rem",height:"0.875rem",class:"rounded"})]),e("td",null,[d(_,{width:"3rem",height:"0.875rem",class:"rounded"})]),e("td",null,[d(_,{width:"3rem",height:"0.875rem",class:"rounded"})]),e("td",Ee,[d(_,{width:"3.5rem",height:"1.75rem",class:"rounded-lg"})])])),64))])])])):E.value?(s(),r("div",Ce,i(E.value),1)):k.value.length===0?(s(),r("div",Te,[t[21]||(t[21]=e("p",null,"No vendors yet.",-1)),e("button",{type:"button",class:"pill-btn mt-2 inline-flex items-center gap-2 rounded-full bg-orange-500 px-4 py-2.5 text-[var(--label-size)] font-semibold text-white shadow-md hover:bg-orange-600 transition-colors",onClick:t[3]||(t[3]=l=>V.value=!0)}," Add your first vendor ")])):T.value.length===0?(s(),r("div",Ne,[e("p",null,i(c.value?"No matching vendors.":"No vendors yet."),1),c.value?(s(),r("button",{key:0,type:"button",class:"pill-btn mt-2 text-[var(--color-text-muted)] hover:text-[var(--color-text)]",onClick:t[4]||(t[4]=l=>c.value="")}," Clear search ")):f("",!0)])):(s(),r("div",Re,[e("div",Le,[e("table",Me,[t[27]||(t[27]=e("thead",null,[e("tr",null,[e("th",null,"Vendor ID"),e("th",null,"Vendor Name"),e("th",null,"Location"),e("th",null,"Email"),e("th",null,"Tin Number"),e("th",null,"GRA Expiry"),e("th",null,"Expiry Check"),e("th",null,"WHT Expiry"),e("th",null,"WHT Expiry Check"),e("th",{class:"tax-table__actions-th"})])],-1)),e("tbody",null,[(s(!0),r(q,null,Q(K.value,(l,g)=>(s(),r("tr",{key:l.recordId||g},[e("td",null,i(u(l,"Vendor_ID")),1),e("td",null,i(u(l,"Vendor_Name")),1),e("td",null,i(u(l,"Vendor_Location")),1),e("td",null,i(u(l,"Vendor_Email")),1),e("td",null,i(u(l,"Tin_Number")),1),e("td",null,i(P(u(l,"GRA_Expiry_Date"))),1),e("td",null,[e("span",{class:$(["tax-table__status tax-table__status--with-icon",w(u(l,"Expiry_Check"))])},[w(u(l,"Expiry_Check"))==="tax-table__status--valid"?(s(),r("svg",He,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):w(u(l,"Expiry_Check"))==="tax-table__status--expired"?(s(),r("svg",We,[...t[23]||(t[23]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 9l-6 6M9 9l6 6"},null,-1)])])):f("",!0),e("span",Se,i(u(l,"Expiry_Check")),1)],2)]),e("td",null,i(P(u(l,"WHT_Expiry_Date"))),1),e("td",null,[e("span",{class:$(["tax-table__status tax-table__status--with-icon",w(u(l,"WHT_Expiry_Check"))])},[w(u(l,"WHT_Expiry_Check"))==="tax-table__status--valid"?(s(),r("svg",Ie,[...t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):w(u(l,"WHT_Expiry_Check"))==="tax-table__status--expired"?(s(),r("svg",Be,[...t[25]||(t[25]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 9l-6 6M9 9l6 6"},null,-1)])])):f("",!0),e("span",Ae,i(u(l,"WHT_Expiry_Check")),1)],2)]),e("td",je,[e("button",{type:"button",class:"tax-table__edit-btn","aria-label":"Edit",onClick:R=>ee(l)},[...t[26]||(t[26]=[e("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),G(" Edit ",-1)])],8,Ge)])]))),128))])])]),N.value>1?(s(),r("div",$e,[e("button",{type:"button",class:"pagination__btn",disabled:v.value<=1,"aria-label":"Previous page",onClick:t[5]||(t[5]=l=>v.value=Math.max(1,v.value-1))},[...t[28]||(t[28]=[e("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Ue),e("span",ze," Page "+i(v.value)+" of "+i(N.value),1),e("button",{type:"button",class:"pagination__btn",disabled:v.value>=N.value,"aria-label":"Next page",onClick:t[6]||(t[6]=l=>v.value=Math.min(N.value,v.value+1))},[...t[29]||(t[29]=[e("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,Fe)])):f("",!0)]))]),(s(),ie(ue,{to:"body"},[V.value?(s(),r("div",Oe,[e("div",{class:"tax-modal vendor-modal",role:"dialog","aria-labelledby":p.value?"edit-vendor-title":"add-vendor-title","aria-modal":"true"},[e("header",qe,[e("h2",{id:p.value?"edit-vendor-title":"add-vendor-title",class:"tax-modal__title"},i(p.value?"Edit Vendor":"Add Vendor"),9,Qe),e("button",{type:"button",class:"tax-modal__close","aria-label":"Close",onClick:A},[...t[30]||(t[30]=[e("svg",{class:"tax-modal__close-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),b.value?(s(),r("div",Ye,[t[31]||(t[31]=e("svg",{class:"tax-modal__error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",Ze,i(b.value),1)])):f("",!0),e("form",{class:"tax-modal__form",onSubmit:de(le,["prevent"])},[e("section",Je,[t[37]||(t[37]=e("h3",{class:"tax-modal__section-title"},"Basic details",-1)),e("label",Ke,[t[32]||(t[32]=e("span",null,"Vendor ID",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>o.value.Vendor_ID=l),type:"text",class:"glass-input w-full px-3 py-2.5 rounded-lg",placeholder:"Vendor ID"},null,512),[[x,o.value.Vendor_ID]])]),e("label",Xe,[t[33]||(t[33]=e("span",null,"Vendor Name",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>o.value.Vendor_Name=l),type:"text",class:"glass-input w-full px-3 py-2.5 rounded-lg",placeholder:"Vendor name",required:""},null,512),[[x,o.value.Vendor_Name]])]),e("label",et,[t[34]||(t[34]=e("span",null,"Vendor Location",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>o.value.Vendor_Location=l),type:"text",class:"glass-input w-full px-3 py-2.5 rounded-lg",placeholder:"Location"},null,512),[[x,o.value.Vendor_Location]])]),e("label",tt,[t[35]||(t[35]=e("span",null,"Vendor Email",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>o.value.Vendor_Email=l),type:"email",class:"glass-input w-full px-3 py-2.5 rounded-lg",placeholder:"email@example.com"},null,512),[[x,o.value.Vendor_Email]])]),e("label",lt,[t[36]||(t[36]=e("span",null,"Tin Number",-1)),m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>o.value.Tin_Number=l),type:"text",class:"glass-input w-full px-3 py-2.5 rounded-lg",placeholder:"TIN"},null,512),[[x,o.value.Tin_Number]])])]),e("section",at,[t[42]||(t[42]=e("h3",{class:"tax-modal__section-title"},"Dates",-1)),e("div",ot,[e("label",nt,[t[38]||(t[38]=e("span",null,"GRA Expiry Date",-1)),m(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>o.value.GRA_Expiry_Date=l),type:"date",class:"glass-input w-full px-3 py-2.5 rounded-lg"},null,512),[[x,o.value.GRA_Expiry_Date]])]),e("label",st,[t[39]||(t[39]=e("span",null,"Received Date",-1)),m(e("input",{"onUpdate:modelValue":t[13]||(t[13]=l=>o.value.Received_Date=l),type:"date",class:"glass-input w-full px-3 py-2.5 rounded-lg"},null,512),[[x,o.value.Received_Date]])])]),e("div",rt,[e("label",it,[t[40]||(t[40]=e("span",null,"WHT Expiry Date",-1)),m(e("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>o.value.WHT_Expiry_Date=l),type:"date",class:"glass-input w-full px-3 py-2.5 rounded-lg"},null,512),[[x,o.value.WHT_Expiry_Date]])]),e("label",dt,[t[41]||(t[41]=e("span",null,"Received WHT Date",-1)),m(e("input",{"onUpdate:modelValue":t[15]||(t[15]=l=>o.value.Received_WHT_Date=l),type:"date",class:"glass-input w-full px-3 py-2.5 rounded-lg"},null,512),[[x,o.value.Received_WHT_Date]])])])]),e("div",ut,[e("button",{type:"button",class:"tax-modal__btn-cancel",onClick:A}," Cancel "),e("button",{type:"submit",class:"tax-modal__btn-submit",disabled:C.value},i(C.value?"Saving…":p.value?"Save":"Add Vendor"),9,_t)])],32)],8,Pe)])):f("",!0)]))])}}}),mt=pe(ct,[["__scopeId","data-v-c51ef7c7"]]);export{mt as default};
