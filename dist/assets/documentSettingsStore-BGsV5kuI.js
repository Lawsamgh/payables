import{a2 as h,r as l,E as s,L as u,k as y}from"./index-oHQmfbVN.js";const a="invoice-download-when";function w(e){const n=(e??"").trim();return n==="Don't Show"?"none":n==="Approved"?"approved_only":n==="Posted"?"once_posted":"approved_only"}function I(e){return e==="none"?"Don't Show":e==="approved_only"?"Approved":"Posted"}function _(){try{const e=localStorage.getItem(a);if(e==="once_posted"||e==="approved_only"||e==="none")return e}catch{}return"approved_only"}const T=h("documentSettings",()=>{const e=l(_()),n=l(null),{findRecordsWithIds:d,updateRecord:f,isConnected:r}=y();s(r,t=>{t&&i()},{immediate:!0});async function i(){var c;if(!r.value)return;const{data:t,error:m}=await d(u.PAYABLES_SETTINGS,{limit:1});if(m||!(t!=null&&t.length))return;const o=t[0];n.value=(o==null?void 0:o.recordId)??null;const S=(c=o==null?void 0:o.fieldData)==null?void 0:c.DocOption;e.value=w(S);try{localStorage.setItem(a,e.value)}catch{}}async function p(){if(!r.value||!n.value)return;const t=I(e.value);await f(u.PAYABLES_SETTINGS,n.value,{DocOption:t})}s(e,async t=>{try{localStorage.setItem(a,t)}catch{}await p()},{immediate:!1});function v(t){e.value=t}return{invoiceDownloadWhen:e,setInvoiceDownloadWhen:v,loadFromFileMaker:i}});export{T as u};
