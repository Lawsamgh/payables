import{d as W,u as Z,o as aa,a as ea,c as t,b as y,n as sa,e,f as k,w as la,g as w,h as x,T as M,r as o,i as S,j as n,s as oa,k as ta,l as na,m as ia,p as B,v as E,q as U,t as V,x as ra,y as da,_ as ua}from"./index-oHQmfbVN.js";const _a=["points"],ca={class:"login__card"},va={class:"login__card-content"},pa={class:"login__brand"},ga={class:"login__steps","aria-hidden":"true"},fa={class:"login__slide-track"},ma={key:"email",class:"login__step"},ha={key:0,class:"login__field"},ba={class:"login__field"},ya={key:0,class:"login__error"},ka=["disabled"],wa={key:"password",class:"login__step"},xa={class:"login__email-display"},Ma={class:"login__email-value"},Sa={class:"login__field"},Ba={key:0,class:"login__error"},Ea=["disabled"],Ua={key:0,class:"login__btn-content"},Va={key:1,class:"login__btn-content"},A=24,Na=W({__name:"LoginView",setup(Fa){const G=na(),_=Z(),{login:T,hasBaseUrl:j,error:D}=ta(),c=o(""),d=o(""),v=o(""),u=o(!1),i=o(null),r=o("email"),N=o(null),F=S(()=>{var s;return!!((s=da())!=null&&s.trim())}),p=o([]),g=o(0),f=o(0);let m=0,h=!1;const Y=S(()=>({opacity:h?1:0})),$=S(()=>{const s=p.value;return s.length<2?"":s.map(a=>`${a.x},${a.y}`).join(" ")});function z(s){g.value=s.clientX,f.value=s.clientY}function X(s){h=!0;const a=s.clientX,l=s.clientY;g.value=a,f.value=l,p.value=Array.from({length:A},()=>({x:a,y:l}))}function H(){h=!1}function L(s,a,l){return s+(a-s)*l}function R(){let s=g.value,a=f.value;const l=[],C=.18;for(let b=0;b<A;b++){const I=p.value[b]??{x:s,y:a},P=L(I.x,s,C),q=L(I.y,a,C);l.push({x:P,y:q}),s=P,a=q}p.value=l,m=requestAnimationFrame(R)}aa(()=>{m=requestAnimationFrame(R)}),ea(()=>{cancelAnimationFrame(m)});async function O(){if(i.value=null,!F.value&&!c.value.trim()){_.error("Enter FileMaker base URL");return}if(!d.value.trim()){_.error("Enter your email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.value.trim())){_.error("Enter a valid email address");return}r.value="password"}function J(){var s;r.value==="password"&&((s=N.value)==null||s.focus())}function K(){i.value=null,r.value="email"}async function Q(){if(i.value=null,!v.value){_.error("Enter your password");return}u.value=!0;try{if(!F.value&&c.value.trim()&&oa(c.value.trim()),await T({username:d.value.trim(),password:v.value.trim()}))u.value=!1,G.replace("/home");else{i.value=null,v.value="";const a=D.value||"Invalid credentials. Please try again.";_.error(a)}}finally{u.value=!1}}return(s,a)=>(n(),t("div",{class:"login",onMousemove:z,onMouseenter:X,onMouseleave:H},[a[12]||(a[12]=y('<div class="login__bg" aria-hidden="true" data-v-6c091a76></div><div class="login__bg-glow" aria-hidden="true" data-v-6c091a76></div><div class="login__bg-shapes" aria-hidden="true" data-v-6c091a76><div class="login__shape login__shape--1" data-v-6c091a76></div><div class="login__shape login__shape--2" data-v-6c091a76></div><div class="login__shape login__shape--3" data-v-6c091a76></div><div class="login__shape login__shape--4" data-v-6c091a76></div><div class="login__shape login__shape--5" data-v-6c091a76></div></div><div class="login__bg-drops" aria-hidden="true" data-v-6c091a76><div class="login__drop login__drop--1" data-v-6c091a76></div><div class="login__drop login__drop--2" data-v-6c091a76></div><div class="login__drop login__drop--3" data-v-6c091a76></div><div class="login__drop login__drop--4" data-v-6c091a76></div><div class="login__drop login__drop--5" data-v-6c091a76></div><div class="login__drop login__drop--6" data-v-6c091a76></div><div class="login__drop login__drop--7" data-v-6c091a76></div><div class="login__drop login__drop--8" data-v-6c091a76></div></div><div class="login__bg-grid" aria-hidden="true" data-v-6c091a76></div><div class="login__bg-dots" aria-hidden="true" data-v-6c091a76></div><div class="login__bg-noise" aria-hidden="true" data-v-6c091a76></div>',7)),(n(),t("svg",{class:"login__cursor-flame","aria-hidden":"true",style:sa(Y.value)},[a[4]||(a[4]=y('<defs data-v-6c091a76><linearGradient id="flame-gradient" x1="0%" y1="0%" x2="100%" y2="0%" data-v-6c091a76><stop offset="0%" stop-color="rgba(147, 197, 253, 0.95)" data-v-6c091a76></stop><stop offset="35%" stop-color="rgba(99, 102, 241, 0.6)" data-v-6c091a76></stop><stop offset="70%" stop-color="rgba(168, 85, 247, 0.25)" data-v-6c091a76></stop><stop offset="100%" stop-color="transparent" data-v-6c091a76></stop></linearGradient><filter id="flame-glow" x="-50%" y="-50%" width="200%" height="200%" data-v-6c091a76><feGaussianBlur in="SourceGraphic" stdDeviation="1" result="blur" data-v-6c091a76></feGaussianBlur><feMerge data-v-6c091a76><feMergeNode in="blur" data-v-6c091a76></feMergeNode><feMergeNode in="SourceGraphic" data-v-6c091a76></feMergeNode></feMerge></filter></defs>',1)),e("polyline",{fill:"none",stroke:"url(#flame-gradient)","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",filter:"url(#flame-glow)",points:$.value},null,8,_a)],4)),e("div",ca,[e("div",va,[e("div",pa,[a[5]||(a[5]=y('<div class="login__logo" data-v-6c091a76><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c091a76><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-6c091a76></path></svg></div><h1 class="login__title" data-v-6c091a76>Finance Payables</h1><p class="login__subtitle" data-v-6c091a76>Sign in to continue</p>',3)),e("div",ga,[e("span",{class:k(["login__step-dot",{"login__step-dot--active":r.value==="email"}])},null,2),e("span",{class:k(["login__step-line",{"login__step-line--filled":r.value==="password"}])},null,2),e("span",{class:k(["login__step-dot",{"login__step-dot--active":r.value==="password"}])},null,2)])]),e("div",fa,[e("form",{class:"login__form",onSubmit:a[3]||(a[3]=la(l=>r.value==="email"?O():Q(),["prevent"]))},[w(M,{name:"login-step",mode:"out-in",onAfterEnter:J},{default:x(()=>[r.value==="email"?(n(),t("div",ma,[ia(j)?U("",!0):(n(),t("label",ha,[a[6]||(a[6]=e("span",{class:"login__label"},"FileMaker base URL",-1)),B(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>c.value=l),type:"url",class:"login__input",placeholder:"https://host/fmi/data/v1/databases/YourDB",required:"",autocomplete:"url"},null,512),[[E,c.value]])])),e("label",ba,[a[7]||(a[7]=e("span",{class:"login__label"},"Email",-1)),B(e("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>d.value=l),type:"email",class:"login__input",placeholder:"name@example.com",required:"",autocomplete:"email"},null,512),[[E,d.value]])]),w(M,{name:"login-error"},{default:x(()=>[i.value?(n(),t("p",ya,V(i.value),1)):U("",!0)]),_:1}),e("button",{type:"submit",class:"login__btn",disabled:u.value}," Proceed ",8,ka)])):(n(),t("div",wa,[e("div",xa,[a[8]||(a[8]=e("span",{class:"login__label"},"Signing in as",-1)),e("span",Ma,V(d.value),1),e("button",{type:"button",class:"login__back",onClick:K}," Change ")]),e("label",Sa,[a[9]||(a[9]=e("span",{class:"login__label"},"Password",-1)),B(e("input",{ref_key:"passwordInputRef",ref:N,"onUpdate:modelValue":a[2]||(a[2]=l=>v.value=l),type:"password",class:"login__input",placeholder:"Enter your password",required:"",autocomplete:"current-password"},null,512),[[E,v.value]])]),w(M,{name:"login-error"},{default:x(()=>[i.value?(n(),t("p",Ba,V(i.value),1)):U("",!0)]),_:1}),e("button",{type:"submit",class:"login__btn",disabled:u.value},[u.value?(n(),t("span",Ua,[...a[10]||(a[10]=[e("span",{class:"login__spinner"},null,-1),ra(" Signing inâ€¦ ",-1)])])):(n(),t("span",Va,"Sign in"))],8,Ea)]))]),_:1})],32)]),a[11]||(a[11]=e("p",{class:"login__hint"},"Use your FileMaker account credentials",-1))])])],32))}}),Ra=ua(Na,[["__scopeId","data-v-6c091a76"]]);export{Ra as default};
