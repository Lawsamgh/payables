import{d as ot,c as i,e as t,t as p,q as g,n as ze,b as tt,F as C,B as j,g as f,T as Bt,h as me,i as v,r as S,j as n,f as W,C as ye,_ as Rt,D as Vt,E as Lt,u as At,G as at,H,o as Pt,m as A,I as It,s as E,p as Ve,v as Ft,J as Fe,l as Gt,K as Ot,x as Ht,L as Ge,M as Et,k as Wt,N as m,w as zt,O as qt}from"./index-B7jQKMlp.js";const Kt={class:"daily-posted-chart"},Yt={class:"daily-posted-chart__header"},Ut={class:"daily-posted-chart__title-row"},Xt={class:"daily-posted-chart__title"},Jt={key:0,class:"daily-posted-chart__subtitle daily-posted-chart__subtitle--muted"},Qt={key:1,class:"daily-posted-chart__subtitle"},Zt=["viewBox"],ea={class:"daily-posted-chart__grid"},ta=["x1","y1","x2","y2"],aa={class:"daily-posted-chart__bars"},sa=["d","fill","onMouseenter"],oa={class:"daily-posted-chart__axis"},ra=["x","y"],la={class:"daily-posted-chart__axis daily-posted-chart__axis--x"},na=["x","y"],ia={class:"daily-posted-chart__tooltip-date"},da={class:"daily-posted-chart__tooltip-value"},ua={key:1,class:"daily-posted-chart__empty"},ca={class:"daily-posted-chart__empty-text"},Oe=6,va=6,st=24,pa=ot({__name:"DailyPostedChart",props:{data:{},currency:{default:"GHS"},totalLabel:{},xAxisMode:{default:"date"},dateLabel:{},chartType:{default:"posted"},chartWidth:{default:360},chartHeight:{default:60}},setup(qe){const B=qe,z=v(()=>B.xAxisMode==="vendor"),ie=v(()=>B.chartType==="approved"?"Approved":"Posted"),de=v(()=>ie.value.toLowerCase()),se=v(()=>{var h;if(!z.value)return`${ie.value} by day`;const d=(h=B.dateLabel)==null?void 0:h.trim();return d&&d.toLowerCase()!=="today"?`${ie.value} on ${d} by vendor`:`${ie.value} today by vendor`}),ge=S(null),P=S(-1),ue=v(()=>B.chartHeight),T=v(()=>B.chartWidth),N={top:4,right:8,bottom:20,left:36},ce=v(()=>{const d=k.value.length;if(d===0)return T.value;const h=T.value-N.left-N.right,_=d*st+(d-1)*Oe;return _>h?N.left+N.right+_:T.value}),Me=v(()=>ce.value-N.right),Q=v(()=>ue.value-N.bottom),k=v(()=>B.xAxisMode==="vendor"?B.data.slice(0,10):B.data.slice().sort((h,_)=>h.date.localeCompare(_.date)).slice(-7)),X=v(()=>{if(k.value.length===0)return 0;const d=k.value.map(_=>Number(_.total)).filter(_=>Number.isFinite(_)&&_>=0);if(d.length===0)return 0;const h=Math.max(...d);return h>0?h:0}),Te=v(()=>k.value.reduce((d,h)=>d+h.total,0)),be=v(()=>{const d=X.value;if(d<=0)return[0];const h=d<=5?1:d<=20?5:d<=100?20:d<=500?100:Math.ceil(d/5/100)*100,_=[];for(let w=0;w<=d;w+=h)_.push(w);return _[_.length-1]<d&&_.push(d),_});function D(d){if(X.value<=0)return Q.value;const h=Q.value-N.top;return Q.value-d/X.value*h}const b=v(()=>{const d=k.value.length;if(d===0)return 0;const h=Me.value-N.left-(d-1)*Oe;return Math.max(st,h/d)});function R(d){const h=k.value.length;if(h===0)return 0;const _=h*b.value+(h-1)*Oe;return N.left+(Me.value-N.left-_)/2+b.value/2+d*(b.value+Oe)}function V(d){if(d.total>0)return!1;const h=d.totalsByCurrency;return h?Object.values(h).some(_=>_>0):!1}function I(d,h){const _=R(h)-b.value/2;let w=X.value>0?d.total/X.value*(Q.value-N.top):0;w<.5&&V(d)&&(w=Math.min(10,(Q.value-N.top)*.2));const M=Q.value-w;if(w<.5)return"";const re=Math.min(va,b.value/2,w/2),Z=b.value;return`M ${_} ${M+re} Q ${_} ${M} ${_+re} ${M} L ${_+Z-re} ${M} Q ${_+Z} ${M} ${_+Z} ${M+re} L ${_+Z} ${Q.value} L ${_} ${Q.value} Z`}function F(d){return d>=1e6?(d/1e6).toFixed(1)+"M":d>=1e3?(d/1e3).toFixed(1)+"k":String(Math.round(d))}function we(d){return X.value<=100&&d===Math.round(d)?String(d):F(d)}function oe(d){const h=new Date(d+"T12:00:00");return isNaN(h.getTime())?d:`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][h.getMonth()]} ${h.getDate()}`}function L(d){const h=new Date(d+"T12:00:00");return isNaN(h.getTime())?d:h.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}function xe(d){const h=d.totalsByCurrency;return h&&Object.keys(h).length>0?Object.entries(h).map(([_,w])=>`${_} ${ye(w)}`).join(" · "):`${B.currency} ${ye(d.total)}`}function Le(d,h){return d.label??d.date??`i-${h}`}function He(d){const h=d.label??oe(d.date);return B.xAxisMode==="vendor"&&h.length>12?h.slice(0,10)+"…":h}const Se=v(()=>ce.value<=T.value?{}:{width:`${ce.value/T.value*100}%`}),ve=v(()=>{if(P.value<0||!ge.value)return{};const d=ge.value,h=d.getBoundingClientRect(),_=R(P.value),M=ce.value/T.value*h.width/ce.value,re=_*M-d.scrollLeft,Z=110;let le=re-Z/2;return le=Math.max(6,Math.min(le,h.width-Z-6)),{left:`${le}px`,top:"4px"}});return(d,h)=>(n(),i("div",Kt,[t("header",Yt,[t("div",Ut,[t("h3",Xt,p(se.value),1)]),Te.value===0&&k.value.length===0?(n(),i("p",Jt,p(z.value?`No vendors ${de.value} today`:`No ${de.value} amounts to show`),1)):k.value.length>0?(n(),i("p",Qt,p(k.value.length)+" "+p(z.value?"vendor":"day")+p(k.value.length===1?"":"s")+p(z.value?` ${de.value} today`:" with activity"),1)):g("",!0)]),k.value.length>0?(n(),i("div",{key:0,class:"daily-posted-chart__wrap",ref_key:"chartWrapRef",ref:ge},[t("div",{class:"daily-posted-chart__scroll",style:ze(Se.value)},[(n(),i("svg",{class:"daily-posted-chart__svg",viewBox:`0 0 ${ce.value} ${ue.value}`,preserveAspectRatio:"xMinYMid meet","aria-hidden":"true"},[h[1]||(h[1]=tt('<defs data-v-c8ef8ac5><linearGradient id="daily-posted-bar-fill" x1="0" y1="1" x2="0" y2="0" data-v-c8ef8ac5><stop offset="0%" stop-color="rgba(52, 211, 153, 0.5)" data-v-c8ef8ac5></stop><stop offset="100%" stop-color="rgba(134, 239, 172, 0.92)" data-v-c8ef8ac5></stop></linearGradient><linearGradient id="daily-posted-bar-fill-hover" x1="0" y1="1" x2="0" y2="0" data-v-c8ef8ac5><stop offset="0%" stop-color="rgba(52, 211, 153, 0.65)" data-v-c8ef8ac5></stop><stop offset="100%" stop-color="rgba(167, 243, 208, 1)" data-v-c8ef8ac5></stop></linearGradient><linearGradient id="daily-posted-bar-other" x1="0" y1="1" x2="0" y2="0" data-v-c8ef8ac5><stop offset="0%" stop-color="rgba(251, 191, 36, 0.5)" data-v-c8ef8ac5></stop><stop offset="100%" stop-color="rgba(253, 224, 71, 0.9)" data-v-c8ef8ac5></stop></linearGradient></defs>',1)),t("g",ea,[(n(!0),i(C,null,j(be.value,(_,w)=>(n(),i("line",{key:"grid-"+w,x1:N.left,y1:D(_),x2:Me.value,y2:D(_),class:"daily-posted-chart__grid-line"},null,8,ta))),128))]),t("g",aa,[(n(!0),i(C,null,j(k.value,(_,w)=>(n(),i("path",{key:Le(_,w),d:I(_,w),class:W(["daily-posted-chart__bar",{"daily-posted-chart__bar--hover":P.value===w,"daily-posted-chart__bar--other":V(_)}]),style:ze({animationDelay:`${w*.03}s`}),fill:V(_)?"url(#daily-posted-bar-other)":"url(#daily-posted-bar-fill)",onMouseenter:M=>P.value=w,onMouseleave:h[0]||(h[0]=M=>P.value=-1)},null,46,sa))),128))]),t("g",oa,[(n(!0),i(C,null,j(be.value,(_,w)=>(n(),i("text",{key:"y-"+w,x:N.left-6,y:D(_)+3,class:"daily-posted-chart__axis-text","text-anchor":"end"},p(we(_)),9,ra))),128))]),t("g",la,[(n(!0),i(C,null,j(k.value,(_,w)=>(n(),i("text",{key:"x-"+Le(_,w),x:R(w),y:ue.value-N.bottom+10,class:"daily-posted-chart__axis-text daily-posted-chart__axis-text--x","text-anchor":"middle"},p(He(_)),9,na))),128))])],8,Zt))],4),f(Bt,{name:"daily-posted-tooltip"},{default:me(()=>[P.value>=0&&k.value[P.value]?(n(),i("div",{key:0,class:"daily-posted-chart__tooltip",style:ze(ve.value)},[t("span",ia,p(z.value?k.value[P.value].label??k.value[P.value].date:L(k.value[P.value].date)),1),t("span",da,p(xe(k.value[P.value])),1)],4)):g("",!0)]),_:1})],512)):(n(),i("div",ua,[h[2]||(h[2]=tt('<div class="daily-posted-chart__empty-icon" aria-hidden="true" data-v-c8ef8ac5><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-c8ef8ac5><path d="M3 3v18h18" data-v-c8ef8ac5></path><path d="M7 16v-5h4v5" data-v-c8ef8ac5></path><path d="M13 16V9h4v7" data-v-c8ef8ac5></path></svg></div>',1)),t("p",ca," No "+p(de.value)+" entries with dates yet ",1)]))]))}}),ha=Rt(pa,[["__scopeId","data-v-c8ef8ac5"]]),fa={class:"content-area flex flex-col flex-1 min-h-0 w-full max-w-[1600px] mx-auto px-4 py-5 md:px-6 md:py-6 min-h-[400px]"},_a={class:"flex flex-wrap items-end justify-between gap-4 mb-8"},ma={key:0,class:"flex flex-col gap-10"},ya={class:"flex flex-col gap-3"},ga={class:"flex items-center gap-2 px-4"},ba={class:"list-none p-0 m-0 flex flex-col gap-2"},wa={class:"flex flex-col gap-3"},xa={class:"flex items-center gap-2 px-4"},ka={class:"list-none p-0 m-0 flex flex-col gap-2"},Da={key:1,class:"rounded-2xl bg-red-500/10 border border-red-500/20 px-5 py-4 text-[var(--label-size)] text-red-300"},Ca={key:2,class:"glass rounded-2xl p-12 text-center"},Sa={class:"text-[var(--color-text-muted)] mb-3"},$a={key:1,class:"text-[var(--color-text-muted)] text-sm"},Ma={key:3,class:"flex flex-col gap-10"},Ta={key:0,class:"stats-dashboard","aria-busy":"true"},Na={class:"stats-dashboard__greeting-row"},ja={class:"stats-dashboard__kpis"},Ba={class:"stats-dashboard__charts"},Ra={class:"stat-card stat-card--vendors rounded-2xl border border-[var(--color-border)]/60 bg-white/[0.04] px-4 py-3"},Va={key:1,class:"stats-dashboard"},La={class:"stats-dashboard__greeting-row"},Aa={class:"stats-dashboard__greeting","aria-live":"polite"},Pa={key:0,class:"stats-dashboard__role"},Ia={class:"stats-dashboard__kpis"},Fa={key:0,class:"stat-card stat-card--draft"},Ga={class:"stat-card__value"},Oa={key:1,class:"stat-card stat-card--posted"},Ha={class:"stat-card__value"},Ea={key:0,class:"stat-card__arrow","aria-hidden":"true"},Wa=["disabled","aria-label"],za={class:"stat-card__value"},qa={key:0,class:"stat-card__action-icon","aria-hidden":"true"},Ka={class:"stat-card stat-card--approved"},Ya={class:"stat-card__value"},Ua={class:"stats-dashboard__charts"},Xa={class:"stat-card__value"},Ja={key:2,class:"daily-chart-section daily-chart-section--with-calendar","aria-busy":"true"},Qa={class:"chart-calendar"},Za={class:"chart-calendar__header flex items-center justify-between gap-2"},es={class:"chart-calendar__weekdays flex gap-1 mt-3"},ts={class:"grid grid-cols-7 gap-1 mt-2"},as={class:"chart-calendar__chart"},ss={class:"daily-chart-section__toggle flex gap-2 mb-4"},os={class:"h-[220px] flex items-end justify-around gap-3 px-2"},rs={key:3,class:"daily-chart-section daily-chart-section--with-calendar"},ls={class:"chart-calendar"},ns={class:"chart-calendar__header"},is={class:"chart-calendar__month"},ds={class:"chart-calendar__weekdays"},us={class:"chart-calendar__grid"},cs=["disabled","onClick"],vs={class:"chart-calendar__chart"},ps={class:"daily-chart-section__toggle"},hs={key:4,class:"home-lists","aria-busy":"true"},fs={class:"search-and-tabs space-y-3"},_s={class:"flex gap-2"},ms={class:"list-none p-0 m-0 flex flex-col gap-2 mt-4"},ys={key:5,class:"home-lists"},gs={class:"search-and-tabs"},bs={class:"search-bar search-bar--compact"},ws=["placeholder","aria-label"],xs={key:0,class:"search-bar__hint"},ks={key:0},Ds={key:2},Cs={key:4},Ss={key:6},$s={key:7,class:"search-bar__hint-switch"},Ms={class:"segment-control",role:"tablist","aria-label":"List by status"},Ts={class:"segment-control__badge"},Ns={class:"segment-control__badge"},js={class:"segment-control__badge"},Bs={class:"segment-control__badge"},Rs={id:"panel-draft",role:"tabpanel","aria-labelledby":"tab-draft",class:"flex flex-col gap-3"},Vs={key:0,class:"flex flex-wrap items-center gap-3 rounded-2xl border border-orange-500/40 bg-orange-500/10 px-4 py-3"},Ls={key:1,class:"list-view--inset"},As=["aria-label","onClick"],Ps={key:0,class:"h-3.5 w-3.5",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},Is={class:"font-medium text-[var(--color-text)] min-w-0 truncate"},Fs={class:"list-row__meta"},Gs={class:"list-row__meta-col"},Os=["title"],Hs={class:"list-row__meta-col"},Es=["title"],Ws={class:"list-row__meta-col list-row__meta-col--total"},zs={class:"list-row__meta-value list-row__meta-value--total tabular-nums"},qs={key:2,class:"pagination"},Ks=["disabled"],Ys={class:"pagination__label"},Us=["disabled"],Xs={key:3,class:"rounded-2xl border border-dashed border-[var(--color-border)] py-8 px-4 text-center text-[var(--label-size)] text-[var(--color-text-muted)]"},Js={id:"panel-posted",role:"tabpanel","aria-labelledby":"tab-posted",class:"flex flex-col gap-3"},Qs={key:0,class:"list-view--inset"},Zs={class:"flex min-w-0 items-center gap-2"},eo={class:"font-medium text-[var(--color-text)] truncate"},to={class:"list-row__meta"},ao={class:"list-row__meta-col"},so=["title"],oo={class:"list-row__meta-col"},ro=["title"],lo={class:"list-row__meta-col list-row__meta-col--total"},no={class:"list-row__meta-value list-row__meta-value--total tabular-nums"},io={key:1,class:"pagination"},uo=["disabled"],co={class:"pagination__label"},vo=["disabled"],po={key:2,class:"rounded-2xl border border-dashed border-[var(--color-border)] py-8 px-4 text-center text-[var(--label-size)] text-[var(--color-text-muted)]"},ho={id:"panel-rejected",role:"tabpanel","aria-labelledby":"tab-rejected",class:"flex flex-col gap-3"},fo={key:0,class:"list-view--inset"},_o={class:"font-medium text-[var(--color-text)] min-w-0 truncate"},mo={class:"list-row__meta"},yo={class:"list-row__meta-col"},go=["title"],bo={class:"list-row__meta-col"},wo=["title"],xo={class:"list-row__meta-col list-row__meta-col--total"},ko={class:"list-row__meta-value list-row__meta-value--total tabular-nums"},Do={key:1,class:"pagination"},Co=["disabled"],So={class:"pagination__label"},$o=["disabled"],Mo={key:2,class:"rounded-2xl border border-dashed border-[var(--color-border)] py-8 px-4 text-center text-[var(--label-size)] text-[var(--color-text-muted)]"},To={id:"panel-approved",role:"tabpanel","aria-labelledby":"tab-approved",class:"flex flex-col gap-3"},No={key:0,class:"list-view--inset"},jo={class:"font-medium text-[var(--color-text)] min-w-0 truncate"},Bo={class:"list-row__meta"},Ro={class:"list-row__meta-col"},Vo=["title"],Lo={class:"list-row__meta-col"},Ao=["title"],Po={class:"list-row__meta-col list-row__meta-col--total"},Io={class:"list-row__meta-value list-row__meta-value--total tabular-nums"},Fo={key:1,class:"pagination"},Go=["disabled"],Oo={class:"pagination__label"},Ho=["disabled"],Eo={key:2,class:"rounded-2xl border border-dashed border-[var(--color-border)] py-8 px-4 text-center text-[var(--label-size)] text-[var(--color-text-muted)]"},U=5,Wo=7,qo=ot({__name:"HomeView",setup(qe){const B=Wt(),z=Gt();function ie(a){return Ot(a)}const{findRecordsWithIds:de,isConnected:se,loggedInEmail:ge,findRecordsByQueryWithIds:P}=Ht(),ue=Vt(),T=Lt(),N=At(),ce=v(()=>pe.value.map(a=>(a.fieldData.TransRef??"").trim()).filter(a=>a&&T.isSelected(a)));function Me(a){T.addOpenEntry(a)}function Q(){const a=ce.value;a.length!==0&&(T.openBookletWithRefs(a,"draft"),B.push({name:"entry",query:{transRef:a[0]}}))}const k=S([]),X=S(0),Te=S(!1),be=S(null),D=S(""),b=S(ie(z.query.tab)?z.query.tab:ie(at())?at():"draft");H(()=>z.query.tab,a=>{ie(a)&&a!==b.value&&(b.value=a)}),H(b,a=>{qt(a),!(z.name!=="home"||z.query.tab===a)&&B.replace({path:"/home",query:{...z.query,tab:a}})});const R=S(1),V=S(1),I=S(1),F=S(1),we=S(null),oe=S(null),L=S(!1);function xe(a,e){if(!a)return"";const r=a[e]??a[e.replace(/([A-Z])/g," $1").trim()]??a[e.charAt(0).toLowerCase()+e.slice(1)];return r==null||r===""?"":String(r).trim()}async function Le(){var s;const a=ge.value;if(!a||!se.value){we.value=null,oe.value=null,L.value=!0;return}const e=String(a).trim().toLowerCase(),{data:r}=await P(Ge.PAYABLES_USERS,{Email:a},1);if(r!=null&&r.length){const l=(s=r[0])==null?void 0:s.fieldData,o=xe(l,"FullName")||(l?String(l["Full Name"]??"").trim():"");we.value=o||null;const c=xe(l,"Role");oe.value=c||null}else{const{data:l}=await de(Ge.PAYABLES_USERS,{limit:500}),o=l.find($=>{const x=$==null?void 0:$.fieldData;return xe(x,"Email").trim().toLowerCase()===e}),c=o==null?void 0:o.fieldData,u=xe(c,"FullName")||(c?String(c["Full Name"]??"").trim():"");we.value=u||null;const y=xe(c,"Role");oe.value=y||null}L.value=!0}H([se,ge],()=>{se.value&&ge.value?(L.value=!1,Le()):(we.value=null,oe.value=null,L.value=!1)},{immediate:!0});const He=v(()=>{const a=we.value||"there",e=new Date().getHours();return`${e<12?"Good morning":e<18?"Good afternoon":"Good evening"}, ${a}`}),Se=v(()=>(oe.value??"").trim().toLowerCase()),ve=v(()=>L.value?Se.value?Se.value!=="manager":!0:!1),d=v(()=>!!L.value),h=v(()=>L.value?Se.value?Se.value!=="manager":!0:!1);H([ve,d,h,b,L],()=>{if(!L.value)return;const a=b.value;a==="draft"&&!ve.value?b.value=d.value?"posted":"approved":a==="posted"&&!d.value?b.value=ve.value?"draft":"approved":a==="rejected"&&!h.value&&(b.value=ve.value?"draft":"posted")},{immediate:!0});const _=S(0),w=S(0),M=S(0),re=S(0),Z=S(0);function le(a,e,r=500){const s=a.value,l=performance.now();function o(c){const u=c-l,y=Math.min(u/r,1),$=1-Math.pow(1-y,2);a.value=Math.round(s+(e-s)*$),y<1&&requestAnimationFrame(o)}requestAnimationFrame(o)}function Ae(a,e){var u,y,$,x;if(!e.trim())return!0;const r=e.trim().toLowerCase(),s=String(((u=a.fieldData)==null?void 0:u.VendorName)??"").toLowerCase(),l=String(((y=a.fieldData)==null?void 0:y.VendorID)??"").toLowerCase(),o=String((($=a.fieldData)==null?void 0:$.InvoiceNumber)??"").toLowerCase(),c=String(((x=a.fieldData)==null?void 0:x.TransRef)??"").toLowerCase();return s.includes(r)||l.includes(r)||o.includes(r)||c.includes(r)}function Ee(a){const e=a==null?void 0:a.fieldData;if(!e)return"";const r=e.CreationTimestamp??e["Creation timestamp"]??e.creationTimestamp??e.creation_timestamp??"";return String(r??"").trim()}function Pe(a){const e=a==null?void 0:a.fieldData;if(!e)return"";const r=e.PostedDate??e["Posted date"]??e.postedDate??e.posted_date??e.Date??e.date??"";return String(r??"").trim()}function We(a){const e=a==null?void 0:a.fieldData;if(!e)return"";const r=e.ApprovedDate??e["Approved date"]??e.approvedDate??e.approved_date??e.Date??e.date??"";return String(r??"").trim()}function rt(a){const e=a==null?void 0:a.fieldData;if(!e)return"Draft";const r=e.Status??e.status;if(r!=null&&String(r).trim())return String(r).trim();const s=e.Approved??e.approved,l=e.Rejected??e.rejected,o=e.Posted??e.posted;return s!=null&&String(s).trim()?"Approved":l!=null&&String(l).trim()?"Rejected":o!=null&&String(o).trim()==="Yes"?"Posted":"Draft"}function lt(a){return[...a].sort((e,r)=>{const s=Ee(e),l=Ee(r);if(!s&&!l){const u=Number(e.recordId)||0;return(Number(r.recordId)||0)-u}if(!s)return 1;if(!l)return-1;const o=new Date(s).getTime();return new Date(l).getTime()-o})}function Ie(a,e){const r=a.filter(s=>rt(s)===e);return lt(r)}const pe=v(()=>Ie(k.value,"Draft")),G=v(()=>Ie(k.value,"Posted")),he=v(()=>Ie(k.value,"Rejected")),q=v(()=>Ie(k.value,"Approved")),nt=v(()=>{const a=new Date;a.setDate(a.getDate()-Wo);const e=ne(a.toISOString().slice(0,10));return e?G.value.filter(r=>{const s=ne(Pe(r)),l=ne(Ee(r)),o=s||l;return o&&o<e}):[]}),it=v(()=>{var e,r,s,l;const a=new Map;for(const o of[...q.value,...G.value]){const c=String(((e=o.fieldData)==null?void 0:e.VendorID)??"").trim(),u=String(((r=o.fieldData)==null?void 0:r.VendorName)??"").trim(),y=c||u||"—",$=u||c||"—",x=Number((s=o.fieldData)==null?void 0:s.Total);if(!Number.isFinite(x))continue;const O=String(((l=o.fieldData)==null?void 0:l.Currency)??"").trim()||"GHS";a.has(y)||a.set(y,{name:$,byCurrency:{}});const ae=a.get(y);ae.byCurrency[O]=(ae.byCurrency[O]??0)+x}return Array.from(a.values()).map(o=>{const c=Object.entries(o.byCurrency);if(c.length===0)return null;const[u,y]=c.reduce(($,x)=>$[1]>x[1]?$:x);return{vendorName:o.name,total:y,currency:u}}).filter(o=>o!=null&&o.total>0).sort((o,c)=>c.total-o.total).slice(0,5)}),dt=v(()=>{var e,r;const a=new Map;for(const s of[...q.value,...G.value]){const l=String(((e=s.fieldData)==null?void 0:e.VendorID)??"").trim(),o=String(((r=s.fieldData)==null?void 0:r.VendorName)??"").trim(),c=l||o||"—",u=o||l||"—";a.has(c)||a.set(c,{name:u,count:0}),a.get(c).count+=1}return Array.from(a.values()).filter(s=>s.count>0).sort((s,l)=>l.count-s.count).slice(0,5).map(s=>({vendorName:s.name,count:s.count}))}),ut=v(()=>he.value.map(a=>(a.fieldData.TransRef??"").trim()).filter(Boolean));function ct(){const a=ut.value;if(a.length!==0){if(a.length===1){B.push({name:"entry",query:{transRef:a[0]}});return}T.openBookletWithRefs(a,"rejected"),B.push({name:"entry",query:{transRef:a[0]}})}}function ne(a){if(!a||typeof a!="string")return null;const e=a.trim();if(!e)return null;const r=new Date(e);if(Number.isNaN(r.getTime()))return null;const s=r.getFullYear(),l=String(r.getMonth()+1).padStart(2,"0"),o=String(r.getDate()).padStart(2,"0");return`${s}-${l}-${o}`}const vt=v(()=>{var r,s;const a=new Map;for(const l of G.value){const o=String(((r=l.fieldData)==null?void 0:r.Currency)??"").trim()||"GHS",c=ne(Pe(l));if(!c)continue;const u=Number((s=l.fieldData)==null?void 0:s.Total);if(!Number.isFinite(u))continue;a.has(o)||a.set(o,new Map);const y=a.get(o);y.set(c,(y.get(c)??0)+u)}const e={};return a.forEach((l,o)=>{e[o]=Array.from(l.entries()).map(([c,u])=>({date:c,total:u}))}),e}),Ke=v(()=>{const a=vt.value;let e="GHS",r=0;for(const[s,l]of Object.entries(a)){const o=l.reduce((c,u)=>c+u.total,0);o>r&&(r=o,e=s)}return e});function $e(){const a=new Date,e=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0");return`${e}-${r}-${s}`}const fe=S($e()),_e=S("posted"),ee=S($e().slice(0,7)),pt=v(()=>{const[a,e]=ee.value.split("-").map(Number),r=new Date(a,e-1,1),s=new Date(a,e,0),l=r.getDay(),o=s.getDate(),c=[];for(let x=0;x<l;x++)c.push(null);const u=$e();for(let x=1;x<=o;x++){const O=`${a}-${String(e).padStart(2,"0")}-${String(x).padStart(2,"0")}`;c.push({dateKey:O,day:x,isSelected:O===fe.value,isToday:O===u})}const y=c.length%7;if(y)for(let x=0;x<7-y;x++)c.push(null);const $=[];for(let x=0;x<c.length;x+=7)$.push(c.slice(x,x+7));return $}),ht=v(()=>{const[a,e]=ee.value.split("-").map(Number);return new Date(a,e-1,1).toLocaleDateString(void 0,{month:"long",year:"numeric"})});function ft(){const[a,e]=ee.value.split("-").map(Number);e===1?ee.value=`${a-1}-12`:ee.value=`${a}-${String(e-1).padStart(2,"0")}`}function _t(){const[a,e]=ee.value.split("-").map(Number);e===12?ee.value=`${a+1}-01`:ee.value=`${a}-${String(e+1).padStart(2,"0")}`}function mt(a){fe.value=a,ee.value=a.slice(0,7)}function yt(){fe.value=$e(),ee.value=$e().slice(0,7)}const gt=v(()=>{const a=fe.value;if(!a||a===$e())return"Today";const e=new Date(a+"T12:00:00");return Number.isNaN(e.getTime())?a:e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),bt=v(()=>{var r,s;const a=new Map;for(const l of q.value){const o=String(((r=l.fieldData)==null?void 0:r.Currency)??"").trim()||"GHS",c=ne(We(l));if(!c)continue;const u=Number((s=l.fieldData)==null?void 0:s.Total);if(!Number.isFinite(u))continue;a.has(o)||a.set(o,new Map);const y=a.get(o);y.set(c,(y.get(c)??0)+u)}const e={};return a.forEach((l,o)=>{e[o]=Array.from(l.entries()).map(([c,u])=>({date:c,total:u}))}),e}),Ye=v(()=>{const a=bt.value;let e="GHS",r=0;for(const[s,l]of Object.entries(a)){const o=l.reduce((c,u)=>c+u.total,0);o>r&&(r=o,e=s)}return e}),wt=v(()=>{var s,l,o,c;const a=Ke.value,e=fe.value,r=new Map;for(const u of G.value){const y=ne(Pe(u));if(!y||y!==e)continue;const $=String(((s=u.fieldData)==null?void 0:s.VendorID)??"").trim(),O=String(((l=u.fieldData)==null?void 0:l.VendorName)??"").trim()||$||"—",ae=$||O,ke=Number((o=u.fieldData)==null?void 0:o.Total);if(!Number.isFinite(ke))continue;const De=String(((c=u.fieldData)==null?void 0:c.Currency)??"").trim()||"GHS";r.has(ae)||r.set(ae,{label:O,total:0,totalsByCurrency:{}});const Ce=r.get(ae);Ce.totalsByCurrency[De]=(Ce.totalsByCurrency[De]??0)+ke,De===a&&(Ce.total+=ke)}return Array.from(r.values()).filter(u=>u.total>0||Object.keys(u.totalsByCurrency).length>0).map(u=>({date:u.label,label:u.label,total:u.total,totalsByCurrency:u.totalsByCurrency})).sort((u,y)=>y.total-u.total).slice(0,10)}),xt=v(()=>{var s,l;const a=fe.value,e={};for(const o of G.value){const c=ne(Pe(o));if(!c||c!==a)continue;const u=String(((s=o.fieldData)==null?void 0:s.Currency)??"").trim()||"GHS",y=Number((l=o.fieldData)==null?void 0:l.Total);Number.isFinite(y)&&(e[u]=(e[u]??0)+y)}const r=Object.entries(e).map(([o,c])=>`${o} ${ye(c)||"0.00"}`).filter(Boolean);return r.length>0?r.join(" · "):""}),kt=v(()=>{var s,l,o,c;const a=Ye.value,e=fe.value,r=new Map;for(const u of q.value){const y=ne(We(u));if(!y||y!==e)continue;const $=String(((s=u.fieldData)==null?void 0:s.VendorID)??"").trim(),O=String(((l=u.fieldData)==null?void 0:l.VendorName)??"").trim()||$||"—",ae=$||O,ke=Number((o=u.fieldData)==null?void 0:o.Total);if(!Number.isFinite(ke))continue;const De=String(((c=u.fieldData)==null?void 0:c.Currency)??"").trim()||"GHS";r.has(ae)||r.set(ae,{label:O,total:0,totalsByCurrency:{}});const Ce=r.get(ae);Ce.totalsByCurrency[De]=(Ce.totalsByCurrency[De]??0)+ke,De===a&&(Ce.total+=ke)}return Array.from(r.values()).filter(u=>u.total>0||Object.keys(u.totalsByCurrency).length>0).map(u=>({date:u.label,label:u.label,total:u.total,totalsByCurrency:u.totalsByCurrency})).sort((u,y)=>y.total-u.total).slice(0,10)}),Dt=v(()=>{var s,l;const a=fe.value,e={};for(const o of q.value){const c=ne(We(o));if(!c||c!==a)continue;const u=String(((s=o.fieldData)==null?void 0:s.Currency)??"").trim()||"GHS",y=Number((l=o.fieldData)==null?void 0:l.Total);Number.isFinite(y)&&(e[u]=(e[u]??0)+y)}const r=Object.entries(e).map(([o,c])=>`${o} ${ye(c)||"0.00"}`).filter(Boolean);return r.length>0?r.join(" · "):""}),Ct=v(()=>Ke.value);H(()=>[pe.value.length,G.value.length,he.value.length,q.value.length,X.value],([a,e,r,s,l])=>{le(_,Number(a)),le(w,Number(e)),le(M,Number(r)),le(re,Number(s)),le(Z,Number(l))},{immediate:!0});const te=v(()=>pe.value.filter(a=>Ae(a,D.value))),J=v(()=>G.value.filter(a=>Ae(a,D.value))),K=v(()=>he.value.filter(a=>Ae(a,D.value))),Y=v(()=>q.value.filter(a=>Ae(a,D.value))),Ue=v(()=>te.value.length>0||J.value.length>0||K.value.length>0||Y.value.length>0),St=v(()=>{const a=b.value;return a==="draft"?"Search Draft (vendor, ref…)":a==="posted"?"Search Posted (vendor, ref…)":a==="rejected"?"Search Rejected (vendor, ref…)":"Search Approved (vendor, ref…)"}),$t=v(()=>{if(!D.value)return!1;const a=b.value;return a==="draft"?te.value.length===0:a==="posted"?J.value.length===0:a==="rejected"?K.value.length===0:Y.value.length===0}),Ne=v(()=>Math.max(1,Math.ceil(te.value.length/U))),je=v(()=>Math.max(1,Math.ceil(J.value.length/U))),Be=v(()=>Math.max(1,Math.ceil(K.value.length/U))),Re=v(()=>Math.max(1,Math.ceil(Y.value.length/U))),Mt=v(()=>{const a=(R.value-1)*U;return te.value.slice(a,a+U)}),Tt=v(()=>{const a=(V.value-1)*U;return J.value.slice(a,a+U)}),Nt=v(()=>{const a=(I.value-1)*U;return K.value.slice(a,a+U)}),jt=v(()=>{const a=(F.value-1)*U;return Y.value.slice(a,a+U)});H(D,()=>{R.value=1,V.value=1,I.value=1,F.value=1}),H(Ne,a=>{R.value>a&&(R.value=Math.max(1,a))}),H(je,a=>{V.value>a&&(V.value=Math.max(1,a))}),H(Be,a=>{I.value>a&&(I.value=Math.max(1,a))}),H(Re,a=>{F.value>a&&(F.value=Math.max(1,a))});const Xe=v(()=>{var e,r;const a={};for(const s of pe.value){const l=String(((e=s.fieldData)==null?void 0:e.Currency)??"").trim()||"GHS",o=Number((r=s.fieldData)==null?void 0:r.Total);Number.isFinite(o)&&(a[l]=(a[l]??0)+o)}return a}),Je=v(()=>{var e,r;const a={};for(const s of G.value){const l=String(((e=s.fieldData)==null?void 0:e.Currency)??"").trim()||"GHS",o=Number((r=s.fieldData)==null?void 0:r.Total);Number.isFinite(o)&&(a[l]=(a[l]??0)+o)}return a}),Qe=v(()=>{var e,r;const a={};for(const s of he.value){const l=String(((e=s.fieldData)==null?void 0:e.Currency)??"").trim()||"GHS",o=Number((r=s.fieldData)==null?void 0:r.Total);Number.isFinite(o)&&(a[l]=(a[l]??0)+o)}return a}),Ze=v(()=>{var e,r;const a={};for(const s of q.value){const l=String(((e=s.fieldData)==null?void 0:e.Currency)??"").trim()||"GHS",o=Number((r=s.fieldData)==null?void 0:r.Total);Number.isFinite(o)&&(a[l]=(a[l]??0)+o)}return a});H([pe,G,he,q],()=>{ue.setCounts(pe.value.length,G.value.length,he.value.length,q.value.length),ue.setOverdueCount(nt.value.length),ue.setVendorStats(it.value,dt.value)},{immediate:!0}),H([Xe,Je,Qe,Ze],()=>{ue.setTotalsByCurrency(Xe.value,Je.value,Qe.value,Ze.value)},{immediate:!0});async function et(){if(!se.value){k.value=[],X.value=0;return}Te.value=!0,be.value=null;try{const[a,e]=await Promise.all([de(Ge.PAYABLES_MAIN,{limit:500}),de(Ge.VENDOR_TBL,{limit:5e3})]);a.error?(N.error(a.error),be.value=null,k.value=[]):k.value=a.data,e.error?(N.error(e.error),X.value=0):X.value=e.data.length}finally{Te.value=!1}}return Pt(et),H(se,a=>{a&&et()}),(a,e)=>{const r=Et("router-link");return n(),i("div",fa,[t("header",_a,[e[18]||(e[18]=t("div",null,[t("h1",{class:"text-[1.75rem] font-bold tracking-tight text-[var(--color-text)] md:text-[2rem]",style:{"letter-spacing":"-0.025em","line-height":"1.2"}}," Finance Payables "),t("p",{class:"mt-1 text-[13px] text-[var(--color-text-muted)]"}," Open entries and flip between them like a booklet. ")],-1)),f(r,{to:"/entry",class:"pill-btn inline-flex items-center gap-2 rounded-full bg-orange-500 px-4 py-2.5 text-[var(--label-size)] font-semibold text-white no-underline shadow-md hover:bg-orange-600 transition-colors"},{default:me(()=>[...e[17]||(e[17]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),E(" New entry ",-1)])]),_:1})]),Te.value?(n(),i("div",ma,[t("section",ya,[t("header",ga,[f(m,{width:"4rem",height:"0.75rem",class:"rounded"}),f(m,{width:"2rem",height:"1rem",class:"rounded-full"})]),t("ul",ba,[(n(),i(C,null,j(5,s=>t("li",{key:s,class:"list-row list-row--draft rounded-2xl border border-[var(--color-border)] bg-[var(--color-bg-card)] px-4 py-3.5 flex items-center gap-3"},[f(m,{width:"1.5rem",height:"1.5rem",circle:""}),f(m,{width:"40%",height:"0.875rem",class:"max-w-[8rem]"}),f(m,{width:"5rem",height:"0.75rem"}),f(m,{width:"4rem",height:"0.75rem"}),f(m,{width:"5rem",height:"0.75rem"}),f(m,{width:"4rem",height:"2rem",class:"rounded-full ml-auto"})])),64))])]),t("section",wa,[t("header",xa,[f(m,{width:"4rem",height:"0.75rem",class:"rounded"}),f(m,{width:"2rem",height:"1rem",class:"rounded-full"})]),t("ul",ka,[(n(),i(C,null,j(3,s=>t("li",{key:s,class:"list-row rounded-2xl border border-[var(--color-border)] bg-[var(--color-bg-card)] px-4 py-3.5 flex items-center gap-3"},[f(m,{width:"1.25rem",height:"1.25rem",circle:"",class:"shrink-0"}),f(m,{width:"35%",height:"0.875rem",class:"max-w-[7rem]"}),f(m,{width:"4.5rem",height:"0.75rem"}),f(m,{width:"3.5rem",height:"0.75rem"}),f(m,{width:"4.5rem",height:"0.75rem"}),f(m,{width:"3rem",height:"1.75rem",class:"rounded-full ml-auto"})])),64))])])])):be.value?(n(),i("div",Da,p(be.value),1)):k.value.length===0?(n(),i("div",Ca,[t("p",Sa,p(A(se)?"No payables yet.":"Connect to FileMaker to load payables, or create a new entry."),1),A(se)?(n(),It(r,{key:0,to:"/entry",class:"text-[var(--color-accent)] font-medium hover:underline"},{default:me(()=>[...e[19]||(e[19]=[E("Create one",-1)])]),_:1})):(n(),i("span",$a,[...e[20]||(e[20]=[E("Click ",-1),t("strong",null,"Connect",-1),E(" in the status bar below.",-1)])]))])):(n(),i("div",Ma,[L.value?(n(),i("div",Va,[t("div",La,[t("p",Aa,p(He.value),1),oe.value?(n(),i("span",Pa,p(oe.value),1)):g("",!0)]),t("div",Ia,[ve.value?(n(),i("div",Fa,[e[21]||(e[21]=t("span",{class:"stat-card__label"},"Draft",-1)),t("span",Ga,p(_.value),1),e[22]||(e[22]=t("span",{class:"stat-card__sublabel"},"entries",-1))])):g("",!0),d.value?(n(),i("div",Oa,[e[23]||(e[23]=t("span",{class:"stat-card__label"},"Posted",-1)),t("span",Ha,p(w.value),1),e[24]||(e[24]=t("span",{class:"stat-card__sublabel"},"entries",-1))])):g("",!0),h.value?(n(),i("div",{key:2,class:W(["stat-card-wrap stat-card-wrap--rejected",{"stat-card-wrap--has-rejected":M.value>0}])},[M.value>0?(n(),i("span",Ea,[...e[25]||(e[25]=[t("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M12 5v14M5 12l7 7 7-7"})],-1)])])):g("",!0),t("button",{type:"button",class:W(["stat-card stat-card--rejected stat-card--clickable",{"stat-card--booklet":M.value>1}]),disabled:M.value===0,"aria-label":M.value>1?`Open ${M.value} rejected entries in booklet`:M.value===1?"Open rejected entry":"No rejected entries",onClick:ct},[e[27]||(e[27]=t("span",{class:"stat-card__label"},"Rejected",-1)),t("span",za,p(M.value),1),e[28]||(e[28]=t("span",{class:"stat-card__sublabel"},"entries",-1)),M.value>0?(n(),i("span",qa,[...e[26]||(e[26]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)])])):g("",!0)],10,Wa)],2)):g("",!0),t("div",Ka,[e[29]||(e[29]=t("span",{class:"stat-card__label"},"Approved",-1)),t("span",Ya,p(re.value),1),e[30]||(e[30]=t("span",{class:"stat-card__sublabel"},"entries",-1))])]),t("div",Ua,[f(r,{to:"/vendors",class:"stat-card stat-card--vendors stat-card--link stats-dashboard__vendors","aria-label":"View vendors"},{default:me(()=>[e[31]||(e[31]=t("span",{class:"stat-card__label"},"Vendors",-1)),t("span",Xa,p(Z.value),1),e[32]||(e[32]=t("span",{class:"stat-card__sublabel"},"vendors",-1)),e[33]||(e[33]=t("span",{class:"stat-card__action-icon stat-card__action-icon--vendors","aria-hidden":"true"},[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M5 12h14M12 5l7 7-7 7"})])],-1))]),_:1})])])):(n(),i("div",Ta,[t("div",Na,[f(m,{width:"14rem",height:"1.75rem",class:"rounded"})]),t("div",ja,[(n(),i(C,null,j(4,s=>t("div",{key:s,class:"stat-card rounded-2xl border border-[var(--color-border)]/60 bg-white/[0.04] px-4 py-3"},[f(m,{width:"3.5rem",height:"0.875rem",class:"rounded mb-2"}),f(m,{width:"2.5rem",height:"1.5rem",class:"rounded"}),f(m,{width:"2rem",height:"0.75rem",class:"rounded mt-1"})])),64))]),t("div",Ba,[t("div",Ra,[f(m,{width:"4rem",height:"0.875rem",class:"rounded mb-2"}),f(m,{width:"2.5rem",height:"1.5rem",class:"rounded"}),f(m,{width:"2.5rem",height:"0.75rem",class:"rounded mt-1"})])])])),L.value?(n(),i("section",rs,[t("div",ls,[t("div",ns,[t("button",{type:"button",class:"chart-calendar__nav","aria-label":"Previous month",onClick:ft},[...e[34]||(e[34]=[t("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),t("span",is,p(ht.value),1),t("button",{type:"button",class:"chart-calendar__nav","aria-label":"Next month",onClick:_t},[...e[35]||(e[35]=[t("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{d:"M9 18l6-6-6-6"})],-1)])])]),t("div",ds,[(n(),i(C,null,j(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=>t("span",{key:s,class:"chart-calendar__weekday"},p(s),1)),64))]),t("div",us,[(n(!0),i(C,null,j(pt.value,(s,l)=>(n(),i(C,{key:l},[(n(!0),i(C,null,j(s,(o,c)=>(n(),i("button",{key:l*7+c,type:"button",class:W(["chart-calendar__day",{"chart-calendar__day--empty":!o,"chart-calendar__day--selected":o==null?void 0:o.isSelected,"chart-calendar__day--today":(o==null?void 0:o.isToday)&&!(o!=null&&o.isSelected)}]),disabled:!o,onClick:u=>o&&mt(o.dateKey)},p(o?o.day:""),11,cs))),128))],64))),128))]),t("button",{type:"button",class:"chart-calendar__today",onClick:yt}," Today ")]),t("div",vs,[t("div",ps,[t("button",{type:"button",class:W(["daily-chart-metric-btn",{"daily-chart-metric-btn--active":_e.value==="posted"}]),onClick:e[0]||(e[0]=s=>_e.value="posted")}," Posted ",2),t("button",{type:"button",class:W(["daily-chart-metric-btn",{"daily-chart-metric-btn--active":_e.value==="approved"}]),onClick:e[1]||(e[1]=s=>_e.value="approved")}," Approved ",2)]),f(ha,{data:_e.value==="posted"?wt.value:kt.value,currency:_e.value==="posted"?Ct.value:Ye.value,"total-label":_e.value==="posted"?xt.value:Dt.value,"date-label":gt.value,"chart-type":_e.value,"x-axis-mode":"vendor"},null,8,["data","currency","total-label","date-label","chart-type"])])])):(n(),i("section",Ja,[t("div",Qa,[t("div",Za,[f(m,{width:"2rem",height:"2rem",class:"rounded shrink-0"}),f(m,{width:"10rem",height:"1.25rem",class:"rounded"}),f(m,{width:"2rem",height:"2rem",class:"rounded shrink-0"})]),t("div",es,[(n(),i(C,null,j(7,s=>f(m,{key:s,width:"2.5rem",height:"0.875rem",class:"rounded"})),64))]),t("div",ts,[(n(),i(C,null,j(35,s=>f(m,{key:s,width:"2rem",height:"2rem",class:"rounded"})),64))]),f(m,{width:"4.5rem",height:"1.75rem",class:"rounded mt-3"})]),t("div",as,[t("div",ss,[f(m,{width:"5rem",height:"2.25rem",class:"rounded"}),f(m,{width:"5.5rem",height:"2.25rem",class:"rounded"})]),t("div",os,[(n(),i(C,null,j(6,s=>f(m,{key:s,width:"2.5rem",height:`${Math.max(40,100-s*12)}%`,class:"rounded-t shrink-0"},null,8,["height"])),64))])])])),L.value?(n(),i("div",ys,[t("div",gs,[t("div",bs,[t("div",{class:W(["search-bar__wrap",{"search-bar__wrap--has-value":D.value}])},[e[37]||(e[37]=t("span",{class:"search-bar__icon","aria-hidden":"true"},[t("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),Ve(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>D.value=s),type:"search",class:"search-bar__input",placeholder:St.value,autocomplete:"off","aria-label":`Search ${b.value} entries`},null,8,ws),[[Ft,D.value,void 0,{trim:!0}]]),D.value?(n(),i("button",{key:0,type:"button",class:"search-bar__clear","aria-label":"Clear search",onClick:e[3]||(e[3]=s=>D.value="")},[...e[36]||(e[36]=[t("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])):g("",!0)],2),D.value?(n(),i("p",xs,[Ue.value?(n(),i(C,{key:0},[te.value.length>0?(n(),i("span",ks,p(te.value.length)+" in Draft",1)):g("",!0),te.value.length>0&&(J.value.length>0||K.value.length>0||Y.value.length>0)?(n(),i(C,{key:1},[E(" · ")],64)):g("",!0),J.value.length>0?(n(),i("span",Ds,p(J.value.length)+" in Posted",1)):g("",!0),J.value.length>0&&(K.value.length>0||Y.value.length>0)?(n(),i(C,{key:3},[E(" · ")],64)):g("",!0),K.value.length>0?(n(),i("span",Cs,p(K.value.length)+" in Rejected",1)):g("",!0),K.value.length>0&&Y.value.length>0?(n(),i(C,{key:5},[E(" · ")],64)):g("",!0),Y.value.length>0?(n(),i("span",Ss,p(Y.value.length)+" in Approved",1)):g("",!0),$t.value&&Ue.value?(n(),i("span",$s," — switch tab to see them ")):g("",!0)],64)):(n(),i(C,{key:1},[E("No matches in any tab")],64))])):g("",!0)]),t("div",Ms,[ve.value?(n(),i("button",{key:0,type:"button",role:"tab","aria-selected":"activeSegment === 'draft'","aria-controls":"panel-draft",id:"tab-draft",class:W(["segment-control__segment",{"segment-control__segment--active":b.value==="draft"}]),onClick:e[4]||(e[4]=s=>b.value="draft")},[e[38]||(e[38]=t("span",{class:"segment-control__label"},"Draft",-1)),t("span",Ts,p(D.value?`${te.value.length} of ${pe.value.length}`:pe.value.length),1)],2)):g("",!0),d.value?(n(),i("button",{key:1,type:"button",role:"tab","aria-selected":"activeSegment === 'posted'","aria-controls":"panel-posted",id:"tab-posted",class:W(["segment-control__segment",{"segment-control__segment--active":b.value==="posted"}]),onClick:e[5]||(e[5]=s=>b.value="posted")},[e[39]||(e[39]=t("span",{class:"segment-control__label"},"Posted",-1)),t("span",Ns,p(D.value?`${J.value.length} of ${G.value.length}`:G.value.length),1)],2)):g("",!0),h.value?(n(),i("button",{key:2,type:"button",role:"tab","aria-selected":"activeSegment === 'rejected'","aria-controls":"panel-rejected",id:"tab-rejected",class:W(["segment-control__segment",{"segment-control__segment--active":b.value==="rejected"}]),onClick:e[6]||(e[6]=s=>b.value="rejected")},[e[40]||(e[40]=t("span",{class:"segment-control__label"},"Rejected",-1)),t("span",js,p(D.value?`${K.value.length} of ${he.value.length}`:he.value.length),1)],2)):g("",!0),t("button",{type:"button",role:"tab","aria-selected":"activeSegment === 'approved'","aria-controls":"panel-approved",id:"tab-approved",class:W(["segment-control__segment",{"segment-control__segment--active":b.value==="approved"}]),onClick:e[7]||(e[7]=s=>b.value="approved")},[e[41]||(e[41]=t("span",{class:"segment-control__label"},"Approved",-1)),t("span",Bs,p(D.value?`${Y.value.length} of ${q.value.length}`:q.value.length),1)],2)])]),Ve(t("section",Rs,[A(T).selectedCount>0?(n(),i("div",Vs,[t("button",{type:"button",class:"pill-btn inline-flex items-center gap-2 rounded-full bg-orange-500 px-4 py-2.5 text-[var(--label-size)] font-semibold text-white shadow-md hover:bg-orange-600 transition-colors",onClick:Q},[e[42]||(e[42]=t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),E(" Open booklet ("+p(A(T).selectedCount)+") ",1)]),t("button",{type:"button",class:"text-[var(--label-size)] font-medium text-[var(--color-text-muted)] hover:text-[var(--color-text)] transition-colors",onClick:e[8]||(e[8]=s=>A(T).clearSelection())}," Clear selection ")])):g("",!0),te.value.length>0?(n(),i("div",Ls,[(n(!0),i(C,null,j(Mt.value,(s,l)=>(n(),i("div",{key:s.recordId||`d-${l}`,class:W(["list-view__row list-row list-row--draft group px-4 py-3.5",A(T).isSelected(s.fieldData.TransRef??"")?"bg-orange-500/5 border-l-4 border-l-orange-500":"border-l-4 border-l-transparent"])},[t("button",{type:"button",class:W(["flex h-6 w-6 shrink-0 items-center justify-center rounded-full border-2 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:ring-offset-2 focus:ring-offset-[var(--color-bg)]",A(T).isSelected(s.fieldData.TransRef??"")?"border-orange-500 bg-orange-500/20 text-orange-400":"border-[var(--color-border)] text-transparent hover:border-[var(--color-text-muted)]"]),"aria-label":A(T).isSelected(s.fieldData.TransRef??"")?"Remove from booklet":"Add to booklet",onClick:zt(o=>A(T).toggleSelected(s.fieldData.TransRef??""),["stop"])},[A(T).isSelected(s.fieldData.TransRef??"")?(n(),i("svg",Ps,[...e[43]||(e[43]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])):g("",!0)],10,As),t("span",Is,p(s.fieldData.VendorName||"—"),1),t("div",Fs,[t("div",Gs,[e[44]||(e[44]=t("span",{class:"list-row__meta-label"},"Vendor ID",-1)),t("span",{class:"list-row__meta-value truncate",title:s.fieldData.VendorID||""},p(s.fieldData.VendorID||"—"),9,Os)]),t("div",Hs,[e[45]||(e[45]=t("span",{class:"list-row__meta-label"},"Ref",-1)),t("span",{class:"list-row__meta-value truncate",title:s.fieldData.TransRef||""},p(s.fieldData.TransRef||"—"),9,Es)]),t("div",Ws,[e[46]||(e[46]=t("span",{class:"list-row__meta-label"},"Total",-1)),t("span",zs,p(s.fieldData.Total!=null?`${s.fieldData.Currency??""} ${A(ye)(s.fieldData.Total)}`.trim():"—"),1)])]),f(r,{to:{name:"entry",query:{transRef:s.fieldData.TransRef??""}},class:"pill-btn glass-input inline-flex items-center justify-end gap-1.5 px-3.5 py-2 text-[var(--label-size)] font-medium text-[var(--color-accent)] no-underline opacity-90 group-hover:opacity-100 transition-opacity justify-self-end",onClick:o=>Me(s.fieldData.TransRef??"")},{default:me(()=>[...e[47]||(e[47]=[E(" Open ",-1),t("svg",{class:"h-3.5 w-3.5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["to","onClick"])],2))),128))])):g("",!0),Ne.value>1?(n(),i("div",qs,[t("button",{type:"button",class:"pagination__btn",disabled:R.value<=1,"aria-label":"Previous page",onClick:e[9]||(e[9]=s=>R.value=Math.max(1,R.value-1))},[...e[48]||(e[48]=[t("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Ks),t("span",Ys," Page "+p(R.value)+" of "+p(Ne.value),1),t("button",{type:"button",class:"pagination__btn",disabled:R.value>=Ne.value,"aria-label":"Next page",onClick:e[10]||(e[10]=s=>R.value=Math.min(Ne.value,R.value+1))},[...e[49]||(e[49]=[t("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,Us)])):g("",!0),te.value.length===0?(n(),i("p",Xs,p(D.value?"No matching draft entries.":"No draft payables."),1)):g("",!0)],512),[[Fe,b.value==="draft"]]),Ve(t("section",Js,[J.value.length>0?(n(),i("div",Qs,[(n(!0),i(C,null,j(Tt.value,(s,l)=>(n(),i("div",{key:s.recordId||`p-${l}`,class:"list-view__row list-row group px-4 py-3.5"},[t("span",Zs,[e[50]||(e[50]=t("span",{class:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-400",title:"Posted"},[t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})])],-1)),t("span",eo,p(s.fieldData.VendorName||"—"),1)]),t("div",to,[t("div",ao,[e[51]||(e[51]=t("span",{class:"list-row__meta-label"},"Vendor ID",-1)),t("span",{class:"list-row__meta-value truncate",title:s.fieldData.VendorID||""},p(s.fieldData.VendorID||"—"),9,so)]),t("div",oo,[e[52]||(e[52]=t("span",{class:"list-row__meta-label"},"Ref",-1)),t("span",{class:"list-row__meta-value truncate",title:s.fieldData.TransRef||""},p(s.fieldData.TransRef||"—"),9,ro)]),t("div",lo,[e[53]||(e[53]=t("span",{class:"list-row__meta-label"},"Total",-1)),t("span",no,p(s.fieldData.Total!=null?`${s.fieldData.Currency??""} ${A(ye)(s.fieldData.Total)}`.trim():"—"),1)])]),f(r,{to:{name:"entry",query:{transRef:s.fieldData.TransRef??""}},class:"pill-btn glass-input inline-flex items-center justify-end gap-1.5 px-3.5 py-2 text-[var(--label-size)] font-medium text-[var(--color-text-muted)] no-underline opacity-80 group-hover:opacity-100 group-hover:text-[var(--color-text)] transition-all justify-self-end"},{default:me(()=>[...e[54]||(e[54]=[E(" View ",-1),t("svg",{class:"h-3.5 w-3.5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["to"])]))),128))])):g("",!0),je.value>1?(n(),i("div",io,[t("button",{type:"button",class:"pagination__btn",disabled:V.value<=1,"aria-label":"Previous page",onClick:e[11]||(e[11]=s=>V.value=Math.max(1,V.value-1))},[...e[55]||(e[55]=[t("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,uo),t("span",co," Page "+p(V.value)+" of "+p(je.value),1),t("button",{type:"button",class:"pagination__btn",disabled:V.value>=je.value,"aria-label":"Next page",onClick:e[12]||(e[12]=s=>V.value=Math.min(je.value,V.value+1))},[...e[56]||(e[56]=[t("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,vo)])):g("",!0),J.value.length===0?(n(),i("p",po,p(D.value?"No matching posted entries.":"No posted payables yet."),1)):g("",!0)],512),[[Fe,b.value==="posted"]]),Ve(t("section",ho,[K.value.length>0?(n(),i("div",fo,[(n(!0),i(C,null,j(Nt.value,(s,l)=>(n(),i("div",{key:s.recordId||`r-${l}`,class:"list-view__row list-row group px-4 py-3.5"},[t("span",_o,p(s.fieldData.VendorName||"—"),1),t("div",mo,[t("div",yo,[e[57]||(e[57]=t("span",{class:"list-row__meta-label"},"Vendor ID",-1)),t("span",{class:"list-row__meta-value truncate",title:s.fieldData.VendorID||""},p(s.fieldData.VendorID||"—"),9,go)]),t("div",bo,[e[58]||(e[58]=t("span",{class:"list-row__meta-label"},"Ref",-1)),t("span",{class:"list-row__meta-value truncate",title:s.fieldData.TransRef||""},p(s.fieldData.TransRef||"—"),9,wo)]),t("div",xo,[e[59]||(e[59]=t("span",{class:"list-row__meta-label"},"Total",-1)),t("span",ko,p(s.fieldData.Total!=null?`${s.fieldData.Currency??""} ${A(ye)(s.fieldData.Total)}`.trim():"—"),1)])]),f(r,{to:{name:"entry",query:{transRef:s.fieldData.TransRef??""}},class:"pill-btn glass-input inline-flex items-center justify-end gap-1.5 px-3.5 py-2 text-[var(--label-size)] font-medium text-[var(--color-accent)] no-underline opacity-90 group-hover:opacity-100 transition-opacity justify-self-end"},{default:me(()=>[...e[60]||(e[60]=[E(" Open ",-1),t("svg",{class:"h-3.5 w-3.5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["to"])]))),128))])):g("",!0),Be.value>1?(n(),i("div",Do,[t("button",{type:"button",class:"pagination__btn",disabled:I.value<=1,"aria-label":"Previous page",onClick:e[13]||(e[13]=s=>I.value=Math.max(1,I.value-1))},[...e[61]||(e[61]=[t("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Co),t("span",So,"Page "+p(I.value)+" of "+p(Be.value),1),t("button",{type:"button",class:"pagination__btn",disabled:I.value>=Be.value,"aria-label":"Next page",onClick:e[14]||(e[14]=s=>I.value=Math.min(Be.value,I.value+1))},[...e[62]||(e[62]=[t("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,$o)])):g("",!0),K.value.length===0?(n(),i("p",Mo,p(D.value?"No matching rejected entries.":"No rejected payables."),1)):g("",!0)],512),[[Fe,b.value==="rejected"]]),Ve(t("section",To,[Y.value.length>0?(n(),i("div",No,[(n(!0),i(C,null,j(jt.value,(s,l)=>(n(),i("div",{key:s.recordId||`a-${l}`,class:"list-view__row list-row group px-4 py-3.5"},[t("span",jo,p(s.fieldData.VendorName||"—"),1),t("div",Bo,[t("div",Ro,[e[63]||(e[63]=t("span",{class:"list-row__meta-label"},"Vendor ID",-1)),t("span",{class:"list-row__meta-value truncate",title:s.fieldData.VendorID||""},p(s.fieldData.VendorID||"—"),9,Vo)]),t("div",Lo,[e[64]||(e[64]=t("span",{class:"list-row__meta-label"},"Ref",-1)),t("span",{class:"list-row__meta-value truncate",title:s.fieldData.TransRef||""},p(s.fieldData.TransRef||"—"),9,Ao)]),t("div",Po,[e[65]||(e[65]=t("span",{class:"list-row__meta-label"},"Total",-1)),t("span",Io,p(s.fieldData.Total!=null?`${s.fieldData.Currency??""} ${A(ye)(s.fieldData.Total)}`.trim():"—"),1)])]),f(r,{to:{name:"entry",query:{transRef:s.fieldData.TransRef??""}},class:"pill-btn glass-input inline-flex items-center justify-end gap-1.5 px-3.5 py-2 text-[var(--label-size)] font-medium text-[var(--color-accent)] no-underline opacity-90 group-hover:opacity-100 transition-opacity justify-self-end"},{default:me(()=>[...e[66]||(e[66]=[E(" View ",-1),t("svg",{class:"h-3.5 w-3.5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["to"])]))),128))])):g("",!0),Re.value>1?(n(),i("div",Fo,[t("button",{type:"button",class:"pagination__btn",disabled:F.value<=1,"aria-label":"Previous page",onClick:e[15]||(e[15]=s=>F.value=Math.max(1,F.value-1))},[...e[67]||(e[67]=[t("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Go),t("span",Oo,"Page "+p(F.value)+" of "+p(Re.value),1),t("button",{type:"button",class:"pagination__btn",disabled:F.value>=Re.value,"aria-label":"Next page",onClick:e[16]||(e[16]=s=>F.value=Math.min(Re.value,F.value+1))},[...e[68]||(e[68]=[t("svg",{class:"pagination__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,Ho)])):g("",!0),Y.value.length===0?(n(),i("p",Eo,p(D.value?"No matching approved entries.":"No approved payables."),1)):g("",!0)],512),[[Fe,b.value==="approved"]])])):(n(),i("div",hs,[t("div",fs,[f(m,{width:"100%",height:"2.75rem",class:"rounded-xl"}),t("div",_s,[f(m,{width:"5rem",height:"2.5rem",class:"rounded-full"}),f(m,{width:"5.5rem",height:"2.5rem",class:"rounded-full"}),f(m,{width:"6rem",height:"2.5rem",class:"rounded-full"}),f(m,{width:"6.5rem",height:"2.5rem",class:"rounded-full"})])]),t("ul",ms,[(n(),i(C,null,j(4,s=>t("li",{key:s,class:"list-row rounded-2xl border border-[var(--color-border)] bg-[var(--color-bg-card)] px-4 py-3.5 flex items-center gap-3"},[f(m,{width:"1.5rem",height:"1.5rem",circle:""}),f(m,{width:"35%",height:"0.875rem",class:"max-w-[8rem]"}),f(m,{width:"4rem",height:"0.75rem"}),f(m,{width:"4rem",height:"0.75rem"}),f(m,{width:"4rem",height:"0.75rem"}),f(m,{width:"4rem",height:"2rem",class:"rounded-full ml-auto"})])),64))])]))]))])}}});export{qo as default};
