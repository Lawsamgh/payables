import{d as $,u as z,E as D,G as T,c as M,e as s,t as E,q as B,w as G,p as k,v as C,P as O,r as i,j as _,L as I,k as q,l as F,g as y,h as V,b as N,K,_ as Y}from"./index-oHQmfbVN.js";const J={key:0,class:"tax-modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"reset-password-title"},W={class:"tax-modal"},Q={key:0,class:"tax-modal__error",role:"alert"},X={class:"tax-modal__error-text"},Z={class:"tax-modal__section"},ss={class:"tax-modal__label"},ts={class:"tax-modal__label"},es={class:"tax-modal__label"},os={class:"tax-modal__actions"},ns=["disabled"],L=6,as=$({__name:"ResetPasswordModal",props:{visible:{type:Boolean,default:!1}},emits:["close"],setup(g,{emit:r}){const S=g,e=r,p=F(),{runScript:w,logout:j}=q(),v=z(),d=i(""),n=i(""),m=i(""),a=i(null),u=i(!1),c={0:"",212:"Current password is incorrect. Please try again.",213:"User account or password does not exist. Please try again.",307:"New password is not allowed. Please choose a different password.",718:"Password does not meet requirements. Please choose a different password."};function P(l){const t=l.trim();if(c[t]!==void 0)return c[t];const o=t.toLowerCase();return o.includes("212")||o.includes("invalid")&&(o.includes("password")||o.includes("account"))?c[212]:o.includes("213")?c[213]:o.includes("307")||o.includes("718")?c[307]:t||"Something went wrong. Please try again."}D(()=>S.visible,l=>{l||(d.value="",n.value="",m.value="",a.value=null)});function f(){e("close")}function A(){return d.value.trim()?n.value.trim()?n.value.length<L?`New password must be at least ${L} characters.`:n.value!==m.value?"New password and confirmation do not match.":null:"Enter a new password.":"Enter your current password."}async function R(){if(u.value)return;a.value=null;const l=A();if(l){v.error(l),a.value=null;return}u.value=!0;try{const t=JSON.stringify({currentPassword:d.value.trim(),newPassword:n.value.trim()}),{error:o,scriptResult:b,scriptError:H}=await w(I.PAYABLES_USERS,"ChangePassword",t),x=(H??"0").trim();if(!(x==="0")){const U=P(x);v.error(U||(o??`Script error: ${x}`)),a.value=null;return}const h=b==null?void 0:b.trim();if(h&&h!=="0"){v.error(P(h)),a.value=null;return}v.success("Password changed. Please sign in again."),f(),j(),p.push({path:"/"})}finally{u.value=!1}}return(l,t)=>(_(),T(O,{to:"body"},[g.visible?(_(),M("div",J,[s("div",W,[s("header",{class:"tax-modal__header"},[t[4]||(t[4]=s("h2",{id:"reset-password-title",class:"tax-modal__title"},"Reset password",-1)),s("button",{type:"button",class:"tax-modal__close","aria-label":"Close",onClick:f},[...t[3]||(t[3]=[s("svg",{class:"tax-modal__close-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a.value?(_(),M("div",Q,[t[5]||(t[5]=s("svg",{class:"tax-modal__error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),s("span",X,E(a.value),1)])):B("",!0),s("form",{class:"tax-modal__form",onSubmit:G(R,["prevent"])},[s("section",Z,[s("label",ss,[t[6]||(t[6]=s("span",null,"Current password",-1)),k(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),type:"password",class:"glass-input w-full px-3 py-2.5 rounded-lg",placeholder:"Enter current password",autocomplete:"current-password"},null,512),[[C,d.value]])]),s("label",ts,[t[7]||(t[7]=s("span",null,"New password",-1)),k(s("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>n.value=o),type:"password",class:"glass-input w-full px-3 py-2.5 rounded-lg",placeholder:"Enter new password",autocomplete:"new-password"},null,512),[[C,n.value]])]),s("label",es,[t[8]||(t[8]=s("span",null,"Confirm new password",-1)),k(s("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>m.value=o),type:"password",class:"glass-input w-full px-3 py-2.5 rounded-lg",placeholder:"Confirm new password",autocomplete:"new-password"},null,512),[[C,m.value]])])]),s("div",os,[s("button",{type:"button",class:"tax-modal__btn-cancel",onClick:f},"Cancel"),s("button",{type:"submit",class:"tax-modal__btn-submit",disabled:u.value},E(u.value?"Changingâ€¦":"Change password"),9,ns)])],32)])])):B("",!0)]))}}),ls={class:"content-area flex flex-col flex-1 min-h-0 w-full max-w-[1600px] mx-auto px-4 py-5 md:px-6 md:py-6 min-h-[400px]"},is={class:"flex flex-col gap-10"},rs={class:"settings-section"},ds={class:"settings-list"},us={class:"settings-section"},cs={class:"settings-list"},ps=$({__name:"SettingsView",setup(g){const r=i(!1);return(S,e)=>{const p=K("router-link");return _(),M("div",ls,[e[8]||(e[8]=s("header",{class:"mb-10"},[s("h1",{class:"text-[1.75rem] font-bold tracking-tight text-[var(--color-text)] md:text-[2rem]",style:{"letter-spacing":"-0.025em","line-height":"1.2"}}," Settings "),s("p",{class:"mt-1.5 text-[13px] text-[var(--color-text-muted)]"}," Configure your preferences. ")],-1)),s("div",is,[s("section",rs,[e[4]||(e[4]=s("h2",{class:"settings-section__title"},"Account",-1)),s("div",ds,[y(p,{to:"/settings/users",class:"settings-item no-underline"},{default:V(()=>[...e[2]||(e[2]=[s("div",{class:"settings-item__icon"},[s("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1),s("div",{class:"settings-item__content"},[s("span",{class:"settings-item__title"},"Manage Users"),s("span",{class:"settings-item__desc"},"Add, edit, and remove user accounts")],-1),s("svg",{class:"settings-item__chevron",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1}),s("button",{type:"button",class:"settings-item settings-item--btn",onClick:e[0]||(e[0]=w=>r.value=!0)},[...e[3]||(e[3]=[N('<div class="settings-item__icon" data-v-39963b1d><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-39963b1d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l11.964-11.964A6 6 0 1121 9z" data-v-39963b1d></path></svg></div><div class="settings-item__content" data-v-39963b1d><span class="settings-item__title" data-v-39963b1d>Reset password</span><span class="settings-item__desc" data-v-39963b1d>Change your sign-in password</span></div><svg class="settings-item__chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-39963b1d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-39963b1d></path></svg>',3)])])])]),s("section",us,[e[6]||(e[6]=s("h2",{class:"settings-section__title"},"Documents",-1)),s("div",cs,[y(p,{to:"/settings/documents",class:"settings-item no-underline"},{default:V(()=>[...e[5]||(e[5]=[s("div",{class:"settings-item__icon"},[s("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),s("div",{class:"settings-item__content"},[s("span",{class:"settings-item__title"},"Documents"),s("span",{class:"settings-item__desc"},"View and manage documents")],-1),s("svg",{class:"settings-item__chevron",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1})])]),e[7]||(e[7]=N('<section class="settings-section" data-v-39963b1d><h2 class="settings-section__title" data-v-39963b1d>General</h2><div class="settings-list" data-v-39963b1d><div class="settings-item settings-item--disabled" data-v-39963b1d><div class="settings-item__icon" data-v-39963b1d><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-39963b1d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" data-v-39963b1d></path></svg></div><div class="settings-item__content" data-v-39963b1d><span class="settings-item__title" data-v-39963b1d>Notifications</span><span class="settings-item__desc" data-v-39963b1d>Email and in-app alerts</span></div><span class="settings-item__badge" data-v-39963b1d>Coming soon</span></div></div></section>',1))]),y(as,{visible:r.value,onClose:e[1]||(e[1]=w=>r.value=!1)},null,8,["visible"])])}}}),_s=Y(ps,[["__scopeId","data-v-39963b1d"]]);export{_s as default};
